import{b as C,r as i,j as e,e as q,s as H,f as O,h as Y,c as E,t as W,u as X}from"./index-D1kJxIkH.js";import{F as R,d as M,b as $,c as B,a as T,e as G,f as J,g as V,h as K,i as Q,j as Z}from"./index-COYwVOmu.js";import{C as U,a as S,b as F,c as I}from"./card-BgFhXkcU.js";import{u as _,C as N}from"./index.esm-CylbFJ5w.js";import{L as w,I as D,T as ee}from"./textarea-tKmYvUyY.js";import{B as k}from"./button-DGMjbkUI.js";import{I as se,_ as ae}from"./index-DUTVWf5v.js";import{G as L}from"./data-DEqlFrNp.js";import{B as te}from"./badge-BlN9PXmE.js";import{M as le,a as re,b as ne,c as ce,d as ie}from"./index-BYccXDrS.js";import{I as oe}from"./index-o4g_Z5nF.js";import"./iconBase-sSTc1SKk.js";import"./index-BXLg_uEm.js";import"./index-Cc2IEVgW.js";const de=()=>{var r;const{getUserData:o}=C(),[s,g]=i.useState({name:"",email:"",phone:"",area:[],govern:"",balance:0,createdAt:"",facebook:"",facebookLink:"",iban:"",instagram:"",instagramLink:"",snapchat:"",snapchatLink:"",tiktok:"",tiktokLink:"",twitter:"",twitterLink:"",privacyPolicy:!1,verified:!1,verifiedBy:""});i.useEffect(()=>{(async()=>{const d=await o();g(d),console.log(d)})()},[o]);const x=n=>new Date(n).toLocaleDateString(),u=[{label:"الاسم الكامل",value:s.name},{label:"عنوان البريد الإلكتروني",value:s.email},{label:"رقم الهاتف",value:s.phone},{label:"تاريخ إنشاء الحساب",value:x(s.createdAt)},{label:"المنطقة",value:s==null?void 0:s.govern},{label:"المحافظات",value:(r=s.area)==null?void 0:r.join(", ")},{label:"رصيد الحساب",value:`$${s.balance}`},{label:"رقم الحساب الدولي (IBAN)",value:s.iban},{label:"تم التحقق",value:s.verified?"نعم":"لا"}],h=[{icon:R,label:"Facebook",value:s.facebook,link:s.facebook},{icon:M,label:"Instagram",value:s.instagram,link:s.instagram},{icon:$,label:"Snapchat",value:s.snapchat,link:s.snapchat},{icon:B,label:"Tiktok",value:s.tiktok,link:s.tiktok},{icon:T,label:"Twitter",value:s.twitter,link:s.twitter},{icon:G,label:"Youtube",value:s.youtube,link:s.youtube}];return e.jsxs(U,{children:[e.jsx(S,{children:e.jsx(F,{className:"text-3xl font-bold text-indigo-900",children:"الملف الشخصي العام"})}),e.jsxs(I,{children:[e.jsx("div",{className:"flex flex-col items-center sm:items-start mb-8",children:e.jsx("img",{className:"object-cover w-32 h-32 rounded-full ring-4 ring-indigo-300",src:(s==null?void 0:s.profilePicture)||"https://via.placeholder.com/150",alt:"Profile"})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:u.map((n,d)=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-900",children:n.label}),e.jsx("div",{className:"p-2 rounded-lg bg-gray-100 text-gray-800",children:n.value})]},d))}),e.jsx("h3",{className:"text-2xl font-semibold text-indigo-900 mt-8 mb-4",children:"وسائل التواصل الاجتماعي"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map((n,d)=>{var t;return e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-indigo-900",children:n.label}),e.jsxs("div",{className:"p-2 rounded-lg bg-gray-100 text-gray-800 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center ",children:[e.jsx(n.icon,{className:"mx-2 "}),e.jsxs("span",{children:[(t=n.value)==null?void 0:t.slice(0,20),"..."]})]}),n.link&&e.jsx("a",{href:n.link,target:"_blank",rel:"noreferrer",className:"text-indigo-700 hover:text-indigo-900 px-2",children:e.jsx(J,{})})]})]},d)})})]})]})},me=()=>{const{getUserData:o,updateUser:s}=C(),[g,x]=i.useState({}),[u,h]=i.useState(""),{control:r,handleSubmit:n,setValue:d}=_(),[t,c]=i.useState(0),[m,v]=i.useState([]),j=l=>{const a=l.target.value,f=L.find(y=>y.name===a);v(f?f.subGovernments:[]),console.log("selectedGovernment",f),console.log("selectedItems",m)};i.useEffect(()=>{(async()=>{const a=await o();x(a),Object.keys(a).forEach(f=>{d(f,a[f])})})()},[o,d]);const b=l=>{const a={...l,...u&&{profilePicture:u},verified:!1};s(l.Uid,a),ae.success("تم حفظ التعديلات بنجاح")},P=l=>{const a=l.target.files[0];if(!a)return;if(!a.type.startsWith("image/")){alert("يرجى رفع ملف صورة فقط.");return}if(a.size>2*1024*1024){alert("حجم الصورة كبير جدًا. الحد الأقصى هو 2 ميغابايت.");return}c(0);let f=g.email||"noUser";const y=q(H,`${f}/profile/${a.name}`),z=O(y,a);z.on("state_changed",p=>{const A=p.bytesTransferred/p.totalBytes*100;console.log("نسبة التقدم:",A),c(A)},p=>{console.error("خطأ أثناء رفع الصورة:",p)},async()=>{try{const p=await Y(z.snapshot.ref);h(p),c(0)}catch(p){console.error("خطأ في الحصول على رابط التنزيل:",p)}})};return e.jsxs(U,{children:[e.jsx(S,{children:e.jsx(F,{className:"text-3xl font-bold text-indigo-900",children:"إعدادات الحساب"})}),e.jsxs(I,{children:[e.jsx("p",{className:"mb-6 text-gray-600",children:"يمكنك هنا تحديث بيانات حسابك بما في ذلك التفاصيل الشخصية وصورتك الشخصية."}),e.jsxs("form",{onSubmit:n(b),className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col items-center mb-6",children:[e.jsx(N,{name:"profilePicture",control:r,render:({field:l})=>e.jsx("img",{className:"object-cover w-32 h-32 rounded-full ring-4 ring-indigo-300 mb-4",src:u||l.value||"https://via.placeholder.com/150",alt:"Profile"})}),e.jsxs(w,{htmlFor:"profilePicture",className:"cursor-pointer",children:[e.jsx("span",{className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition duration-300",children:"تغيير الصورة الشخصية"}),e.jsx(D,{id:"profilePicture",type:"file",accept:"image/*",onChange:P,className:"hidden"}),t!=0&&e.jsx("div",{className:"relative w-full mt-4 h-2 bg-gray-200 rounded-lg dark:bg-gray-700",children:e.jsx("div",{className:"absolute top-0 left-0 h-2 rounded-lg bg-blue-500",style:{width:`${t}%`}})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"name",children:"الاسم الكامل"}),e.jsx(N,{name:"name",control:r,rules:{required:"الاسم الكامل مطلوب"},render:({field:l,fieldState:{error:a}})=>e.jsxs(e.Fragment,{children:[e.jsx(D,{...l}),a&&e.jsx("span",{className:"text-red-500 text-sm",children:a.message})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:"phone",children:"رقم الهاتف"}),e.jsx(N,{name:"phone",control:r,rules:{required:"رقم الهاتف مطلوب"},render:({field:l,fieldState:{error:a}})=>e.jsxs(e.Fragment,{children:[e.jsx(D,{...l}),a&&e.jsx("span",{className:"text-red-500 text-sm",children:a.message})]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700",children:"المنطقة"}),e.jsx(N,{name:"govern",control:r,render:({field:l})=>e.jsxs("select",{className:"w-full px-3 py-2 border rounded-lg focus:outline-none",...l,onChange:a=>{l.onChange(a),j(a)},children:[e.jsx("option",{value:"",children:"اختر المنطقة"}),L.map(a=>e.jsx("option",{value:a.name,children:a.name},a.name))]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-lg font-semibold text-gray-700",children:"المحافظة"}),e.jsx(N,{name:"area",control:r,render:({field:l})=>(i.useEffect(()=>{l.onChange([])},[m]),e.jsx("div",{className:"space-y-3",children:e.jsx("div",{className:"max-h-32 overflow-y-auto p-2 border border-gray-300 rounded-md shadow-sm",children:m.map(a=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",id:a,value:a,checked:l.value.includes(a),onChange:f=>{f.target.checked?l.onChange([...l.value,a]):l.onChange(l.value.filter(y=>y!==a))},className:"h-4 w-4  text-blue-600 border-2 border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 transition-all duration-300 ease-in-out"}),e.jsx("label",{htmlFor:a,className:"text-gray-800 px-2",children:a})]},a))})}))})]}),e.jsxs("div",{className:"space-y-2 ",children:[e.jsx(w,{htmlFor:"bio",children:"نبذة عنك"}),e.jsx(N,{name:"bio",control:r,render:({field:l})=>e.jsx(ee,{...l,rows:4})})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:["facebook","instagram","snapchat","tiktok","twitter","youtube"].map(l=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{htmlFor:l,children:l.charAt(0).toUpperCase()+l.slice(1)}),e.jsx(N,{name:l,control:r,render:({field:a})=>e.jsx(D,{...a})})]},l))}),e.jsx(k,{type:"submit",className:"w-full text-white",children:"حفظ التغييرات"})]})]}),e.jsx(se,{position:"top-center",reverseOrder:!1})]})},xe=()=>{const{getUserData:o,getUserId:s}=C(),[g,x]=i.useState(),{updateNotificationReaded:u}=E(),[h,r]=i.useState([]),n=t=>{u(g,t),d()},d=async()=>{try{const c=(await o()).notifications.sort((m,v)=>new Date(v.time.seconds*1e3)-new Date(m.time.seconds*1e3));r(c)}catch(t){console.error("Error fetching data:",t)}};return i.useEffect(()=>{d()},[o,u]),i.useEffect(()=>{(async()=>{const c=await s();x(c)})()},[]),e.jsxs(U,{children:[e.jsx(S,{children:e.jsx(F,{className:"text-3xl font-bold text-indigo-900",children:"الإشعارات"})}),e.jsxs(I,{children:[e.jsx("p",{className:"mb-6 text-gray-600",children:"إدارة تفضيلات الإشعارات الخاصة بك هنا."}),e.jsx("div",{className:"space-y-4 ",children:(h==null?void 0:h.length)>0?h.map((t,c)=>e.jsx("div",{className:`p-4 rounded-lg shadow-sm ${t!=null&&t.readed?"bg-gray-100":"bg-indigo-50"}`,children:e.jsxs("div",{className:"flex justify-between items-center flex-col gap-3 md:flex-row",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-indigo-900",children:t==null?void 0:t.message}),e.jsx("p",{className:"text-xs text-gray-500",children:t!=null&&t.time?new Date(t.time.seconds*1e3).toLocaleString():"Invalid date"})]}),e.jsxs("div",{className:"flex items-center gap-2 ",children:[!(t!=null&&t.readed)&&e.jsx(k,{onClick:()=>n(t.id),variant:"outline",size:"sm",children:"تم القراءة"}),e.jsx(te,{variant:t!=null&&t.readed?"secondary":"default",children:t!=null&&t.readed?"مقروءة":"جديدة"})]})]})},c)):e.jsx("p",{className:"text-gray-500",children:"لا توجد إشعارات حالياً."})})]})]})},ge=()=>{const{getUserId:o}=C(),{UpdateCurrentUserAds:s,getUserAds:g}=E(),[x,u]=i.useState(null),[h,r]=i.useState(null),[n,d]=i.useState(null),{handleSubmit:t,register:c,setValue:m}=_();i.useEffect(()=>{(async()=>{try{const b=await o();if(r(b),console.log("User ID fetched:",b),b){const P=await g(b);u(P),console.log("User Ads fetched:",P)}}catch(b){console.error("Error fetching data:",b)}})()},[o]);const v=j=>{console.log(j),s(h,{adId:n.adId,links:j}),W.success("تم حفظ المشاركات بنجاح!")};return i.useEffect(()=>{n&&(m("fb",n.links.fb),m("in",n.links.in),m("sh",n.links.sh),m("tk",n.links.tk),m("x",n.links.x),m("you",n.links.you))},[n,m]),e.jsxs(e.Fragment,{children:[e.jsxs(U,{children:[e.jsx(S,{children:e.jsx(F,{className:"text-3xl font-bold text-indigo-900",children:"الحملات الاعلانية"})}),e.jsxs(I,{children:[e.jsx("p",{className:"mb-6 text-gray-600",children:"إدارة تفضيلات للحملات الاعلانية الخاصة بك هنا."}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:(x==null?void 0:x.length)>0?x.map((j,b)=>e.jsxs("div",{className:"p-4 bg-white rounded-lg shadow-md border border-gray-200 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:j.title}),e.jsx("p",{className:"text-sm text-gray-500 mt-2"})]}),e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsxs(k,{size:"sm",variant:"outlined",color:"indigo",className:"flex items-center",children:[e.jsx(V,{className:"text-indigo-500 mr-2"}),"تمييز"]}),e.jsx(k,{size:"sm",variant:"filled",color:"red",className:"flex items-center",onClick:()=>d(j),children:"اضافة مشاركات"})]})]},b)):e.jsx("p",{className:"text-gray-500",children:"لا توجد حمالات اعلانية حالياً."})})]})]}),n&&e.jsxs(U,{className:"mt-10",children:[e.jsx(S,{children:e.jsx(F,{className:"text-3xl font-bold text-indigo-900",children:"تفاصيل الإعلان"})}),e.jsxs(I,{children:[e.jsx("div",{className:"p-4 bg-white rounded-lg shadow-md border border-gray-200",children:e.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:n.title})}),e.jsxs("form",{onSubmit:t(v),className:"space-y-6 mt-10",children:[e.jsxs("div",{className:"grid md:grid-cols-6 gap-4 grid-cols-3 items-center mb-6",children:[e.jsxs("div",{className:"mb-4 col-span-3",children:[e.jsxs("label",{className:"text-gray-700 text-sm font-bold mb-2 flex flex-row items-center gap-2",htmlFor:"fb",children:[e.jsx(R,{size:19}),"مشاركة الفيس بوك"]}),e.jsx("input",{type:"text",id:"fb",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-indigo-300",...c("fb"),placeholder:"https://facebook.com"})]}),e.jsxs("div",{className:"mb-4 col-span-3",children:[e.jsxs("label",{className:"text-gray-700 text-sm font-bold mb-2 flex flex-row items-center gap-2",htmlFor:"in",children:[e.jsx(M,{size:19}),"مشاركة الإنستجرام"]}),e.jsx("input",{type:"text",id:"in",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-indigo-300",...c("in"),placeholder:"https://instagram.com"})]}),e.jsxs("div",{className:"mb-4 col-span-3",children:[e.jsxs("label",{className:"text-gray-700 text-sm font-bold mb-2 flex flex-row items-center gap-2",htmlFor:"sh",children:[e.jsx($,{size:19}),"مشاركة سناب شات"]}),e.jsx("input",{type:"text",id:"sh",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-indigo-300",...c("sh"),placeholder:"https://snapchat.com"})]}),e.jsxs("div",{className:"mb-4 col-span-3",children:[e.jsxs("label",{className:"text-gray-700 text-sm font-bold mb-2 flex flex-row items-center gap-2",htmlFor:"tk",children:[e.jsx(B,{size:19}),"مشاركة تيك توك"]}),e.jsx("input",{type:"text",id:"tk",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-indigo-300",...c("tk"),placeholder:"https://tiktok.com"})]}),e.jsxs("div",{className:"mb-4 col-span-3",children:[e.jsxs("label",{className:"text-gray-700 text-sm font-bold mb-2 flex flex-row items-center gap-2",htmlFor:"x",children:[e.jsx(T,{size:19}),"مشاركة X (تويتر سابقًا)"]}),e.jsx("input",{type:"text",id:"x",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-indigo-300",...c("x"),placeholder:"https://x.com"})]}),e.jsxs("div",{className:"mb-4 col-span-3",children:[e.jsxs("label",{className:"text-gray-700 text-sm font-bold mb-2 flex flex-row items-center gap-2",htmlFor:"you",children:[e.jsx(G,{size:19}),"مشاركة يوتيوب"]}),e.jsx("input",{type:"text",id:"you",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-indigo-300",...c("you"),placeholder:"https://youtube.com"})]})]}),e.jsx(k,{type:"submit",className:"w-full",children:"حفظ التغييرات"})]})]})]})]})},he=({verified:o,accountType:s})=>{const g=()=>{switch(s){case"عادي":return e.jsx(Z,{className:"text-gray-600",size:24});case"فضي":return e.jsx(V,{className:"text-silver-500",size:24});case"ذهبي":return e.jsx(Q,{className:"text-yellow-500",size:24});case"برونزي":return e.jsx(K,{className:"text-brown-500",size:24});default:return null}},x=()=>{switch(s){case"عادي":return"bg-gray-100 text-gray-700";case"فضي":return"bg-gray-200 text-gray-700";case"ذهبي":return"bg-yellow-100 text-yellow-700";case"برونزي":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};return e.jsx("div",{className:`mb-6 p-3 rounded-lg text-center ${o?"border-green-500":"border-red-500"} ${x()}`,children:e.jsx("div",{className:"flex items-center justify-center gap-2 font-semibold",children:o?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"m2 text-lg font-semibold flex flex-row-reverse items-center gap-2",children:[g(),e.jsxs("p",{className:"mt-1",children:[s==="عادي"&&"حساب عادي",s==="فضي"&&"حساب فضي",s==="ذهبي"&&"حساب ذهبي",s==="برونزي"&&"حساب برونزي"]})]})}):e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"text-red-500",size:24}),"حسابك قيد المراجعة"]})})})},Ce=()=>{const[o,s]=i.useState("publicProfile"),{getUserData:g}=C(),x=X(),[u,h]=i.useState(!0),[r,n]=i.useState(null);i.useEffect(()=>{(async()=>{const m=await g();console.log(m),n(m),h(m.verified)})()},[g]);const d=c=>{s(c)},t=[{id:"publicProfile",label:"الصفحة الشخصية",icon:re},{id:"accountSettings",label:"إعدادات الحساب",icon:ne},{id:"notifications",label:"الإشعارات",icon:ce},{id:"UserAds",label:"الحملات الاعلانية",icon:ie}];return e.jsx("div",{className:"min-h-screen bg-gradient-to-r from-indigo-50 via-indigo-100 to-indigo-200",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("aside",{className:"lg:w-1/4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex flex-col items-center mb-6",children:[e.jsx("img",{src:(r==null?void 0:r.profilePicture)||"https://via.placeholder.com/150",alt:"Profile",className:"w-32 h-32 rounded-full border-4 border-indigo-300 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-indigo-900",children:(r==null?void 0:r.name)||"User Name"}),e.jsx("p",{className:"text-indigo-600",children:(r==null?void 0:r.email)||"user@example.com"})]}),e.jsx("div",{children:e.jsx(he,{verified:r==null?void 0:r.verified,accountType:r==null?void 0:r.accountType})}),e.jsxs("nav",{children:[t.map(c=>e.jsxs("button",{className:`w-full mb-2 px-4 py-3 font-bold rounded-lg transition duration-300 ease-in-out flex items-center ${o===c.id?"bg-indigo-900 text-white":"text-indigo-700 hover:bg-indigo-100"}`,onClick:()=>d(c.id),children:[e.jsx(c.icon,{className:"mr-2",size:20}),c.label]},c.id)),e.jsxs("button",{className:"w-full mb-2 px-4 text-indigo-700 hover:bg-indigo-100 py-3 font-bold rounded-lg transition duration-300 ease-in-out flex items-center",onClick:()=>x("/"),children:[e.jsx(oe,{className:"mr-2",size:20}),"الصفحة الرئيسية"]})]})]})}),e.jsx("main",{className:"lg:w-3/4",children:e.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-6 md:p-8",children:[o==="publicProfile"&&e.jsx(de,{}),o==="accountSettings"&&e.jsx(me,{}),o==="notifications"&&e.jsx(xe,{}),o==="UserAds"&&e.jsx(ge,{})]})})]})})})};export{Ce as default};
