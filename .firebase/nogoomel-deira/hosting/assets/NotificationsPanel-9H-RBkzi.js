import{b as w,r as d,c as N,j as s}from"./index-_Ilj38vT.js";import{B as b}from"./badge-C5PlQJDi.js";import{B as v}from"./button-B1TOWV_p.js";import{C as y,a as D,b as C,c as n}from"./card-DRRQy1E6.js";import"./index-Bcvv0Bb8.js";const R=()=>{const{getUserData:l,getUserId:c}=w(),[x,h]=d.useState(),{updateNotificationReaded:t}=N(),[r,p]=d.useState([]),g=e=>{t(x,e),m()},m=async()=>{try{const a=(await l()).notifications.sort((u,j)=>new Date(j.time.seconds*1e3)-new Date(u.time.seconds*1e3));p(a)}catch(e){console.error("Error fetching data:",e)}};return d.useEffect(()=>{m()},[l,t]),d.useEffect(()=>{(async()=>{const a=await c();h(a)})()},[]),s.jsxs(y,{className:"p- m-6 bg-white rounded-lg shadow-md ",children:[s.jsx(D,{children:s.jsx(C,{className:"text-3xl font-bold text-indigo-900",children:"الإشعارات"})}),s.jsxs(n,{children:[s.jsx("p",{className:"mb-6 text-gray-600",children:"إدارة تفضيلات الإشعارات الخاصة بك هنا."}),s.jsx("div",{className:"space-y-4",children:(r==null?void 0:r.length)>0?r.map((e,a)=>s.jsx("div",{className:`p-2 rounded-lg shadow-sm ${e!=null&&e.readed?"bg-gray-100":"bg-indigo-50"}`,children:s.jsxs("div",{className:"flex justify-between items-start flex-col md:flex-row max-w-full overflow-hidden",children:[s.jsxs("div",{className:"w-full text-ellipsis overflow-hidden",children:[s.jsx("p",{className:"text-sm text-indigo-900 whitespace-normal",children:e==null?void 0:e.message}),s.jsx("p",{className:"text-xs text-gray-500 whitespace-normal",children:e!=null&&e.time?new Date(e.time.seconds*1e3).toLocaleString():"Invalid date"})]}),s.jsxs("div",{className:"flex items-center space-x-2 gap-2",children:[!(e!=null&&e.readed)&&s.jsx(v,{onClick:()=>g(e.id),variant:"outline",size:"sm",children:"تم القراءة"}),s.jsx(b,{className:"bg-blue-500 text-white",variant:e!=null&&e.readed?"secondary":"default",children:e!=null&&e.readed?"مقروءة":"جديدة"})]})]})},a)):s.jsx("p",{className:"text-gray-500",children:"لا توجد إشعارات حالياً."})})]})]})};export{R as default};
