import{k as R,r as d,j as r,c as H,L as M}from"./index-B1e1Q4Cp.js";import{m as O,S as U,P as V,a as _}from"./navigation-5ExMbQkV.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=R("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=R("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),G=(...e)=>{console!=null&&console.warn&&(w(e[0])&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e))},F={},S=(...e)=>{w(e[0])&&F[e[0]]||(w(e[0])&&(F[e[0]]=new Date),G(...e))},$=(e,n)=>()=>{if(e.isInitialized)n();else{const a=()=>{setTimeout(()=>{e.off("initialized",a)},0),n()};e.on("initialized",a)}},A=(e,n,a)=>{e.loadNamespaces(n,$(e,a))},z=(e,n,a,i)=>{if(w(a)&&(a=[a]),e.options.preload&&e.options.preload.indexOf(n)>-1)return A(e,a,i);a.forEach(u=>{e.options.ns.indexOf(u)<0&&e.options.ns.push(u)}),e.loadLanguages(n,$(e,i))},W=(e,n,a={})=>!n.languages||!n.languages.length?(S("i18n.languages were undefined or empty",n.languages),!0):n.hasLoadedNamespace(e,{lng:a.lng,precheck:(i,u)=>{var s;if(((s=a.bindI18n)==null?void 0:s.indexOf("languageChanging"))>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!u(i.isLanguageChangingTo,e))return!1}}),w=e=>typeof e=="string",J=e=>typeof e=="object"&&e!==null,K=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Y={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},Q=e=>Y[e],X=e=>e.replace(K,Q);let Z={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:X};const ee=()=>Z;let te;const se=()=>te,ne=d.createContext();class ae{constructor(){this.usedNamespaces={}}addUsedNamespaces(n){n.forEach(a=>{this.usedNamespaces[a]||(this.usedNamespaces[a]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const oe=(e,n)=>{const a=d.useRef();return d.useEffect(()=>{a.current=e},[e,n]),a.current},B=(e,n,a,i)=>e.getFixedT(n,a,i),re=(e,n,a,i)=>d.useCallback(B(e,n,a,i),[e,n,a,i]),ie=(e,n={})=>{var T,L,I,P;const{i18n:a}=n,{i18n:i,defaultNS:u}=d.useContext(ne)||{},s=a||i||se();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new ae),!s){S("You will need to pass in an i18next instance by using initReactI18next");const l=(h,m)=>w(m)?m:J(m)&&w(m.defaultValue)?m.defaultValue:Array.isArray(h)?h[h.length-1]:h,g=[l,{},!1];return g.t=l,g.i18n={},g.ready=!1,g}(T=s.options.react)!=null&&T.wait&&S("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const c={...ee(),...s.options.react,...n},{useSuspense:C,keyPrefix:N}=c;let t=u||((L=s.options)==null?void 0:L.defaultNS);t=w(t)?[t]:t||["translation"],(P=(I=s.reportNamespaces).addUsedNamespaces)==null||P.call(I,t);const o=(s.isInitialized||s.initializedStoreOnce)&&t.every(l=>W(l,s,c)),f=re(s,n.lng||null,c.nsMode==="fallback"?t:t[0],N),p=()=>f,x=()=>B(s,n.lng||null,c.nsMode==="fallback"?t:t[0],N),[k,b]=d.useState(p);let v=t.join();n.lng&&(v=`${n.lng}${v}`);const E=oe(v),y=d.useRef(!0);d.useEffect(()=>{const{bindI18n:l,bindI18nStore:g}=c;y.current=!0,!o&&!C&&(n.lng?z(s,n.lng,t,()=>{y.current&&b(x)}):A(s,t,()=>{y.current&&b(x)})),o&&E&&E!==v&&y.current&&b(x);const h=()=>{y.current&&b(x)};return l&&(s==null||s.on(l,h)),g&&(s==null||s.store.on(g,h)),()=>{y.current=!1,s&&(l==null||l.split(" ").forEach(m=>s.off(m,h))),g&&s&&g.split(" ").forEach(m=>s.store.off(m,h))}},[s,v]),d.useEffect(()=>{y.current&&o&&b(p)},[s,N,o]);const j=[k,s,o];if(j.t=k,j.i18n=s,j.ready=o,o||!o&&!C)return j;throw new Promise(l=>{n.lng?z(s,n.lng,t,()=>l()):A(s,t,()=>l())})},ce=({Title:e,Link:n,Img:a,des:i,category:u})=>{const s={events:"مناسبات",real_estate:"عقارات",cars:"سيارات",electronics:"إلكترونيات",services:"خدمات",home_supplies:"لوازم منزلية",personal_supplies:"لوازم شخصية",animals:"حيوانات"};return r.jsx("div",{className:"my-4 bg-white h-full min-h-[400px] rounded-3xl shadow-lg p-6 transition-all duration-300 hover:shadow-2xl hover:transform hover:scale-[1.02] group",children:r.jsxs("div",{className:"flex flex-col h-full min-h-[400px]",children:[r.jsxs("div",{className:"relative mb-4 overflow-hidden rounded-2xl",children:[r.jsx("img",{src:a,alt:e,className:"w-full h-48 object-cover transition-transform duration-300 group-hover:scale-110"}),u&&r.jsx("span",{className:"absolute top-2 text-white left-2 bg-primary text-primary-foreground px-3 py-1 rounded-full text-xs font-semibold",children:s[u]})]}),r.jsxs("div",{className:"flex-grow",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2 line-clamp-2 min-h-16",children:e}),r.jsx("p",{className:"text-gray-600 mb-4 line-clamp-3 min-h-[4rem]",children:i})]}),r.jsx("div",{className:"mt-auto",children:r.jsxs("a",{href:`ads/${n}`,className:"inline-flex text-white font-semibold items-center justify-center w-full px-4 py-2 bg-primary text-primary-foreground rounded-full text-sm uppercase tracking-wider transition-colors duration-200 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",children:["المزيد",r.jsx(q,{className:"ml-2 h-4 w-4"})]})})]})})},ue=function(){const{t:e}=ie(),[n,a]=d.useState(""),[i,u]=d.useState([]),{getAllAds:s}=H(),c=localStorage.getItem("selectedArea"),C=async function(t,o){var f;try{return((f=(await(await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${t}&lon=${o}&format=json&accept-language=ar`)).json()).address)==null?void 0:f.city)||e("unknownCity")}catch(p){return console.error("Error fetching city name in Arabic:",p),e("failedToFetchCity")}},N=function(){return new Promise(function(t,o){navigator.geolocation?navigator.geolocation.getCurrentPosition(t,o):o(new Error("Geolocation not supported"))})};return d.useEffect(function(){(async function(){try{const o=await N(),f=o.coords.latitude,p=o.coords.longitude,x=await C(f,p);a(x),console.log("City name in Arabic:",x)}catch(o){console.error("Error fetching location or city name:",o)}})()},[]),d.useEffect(function(){(async function(){const o=await s();if(console.log(o),!c||c==="all")u(o);else{const f=o.filter(p=>p.region===c);u(f),console.log("Filtered Ads:",f)}})()},[s]),r.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white dark:bg-gray-800 relative mt-4  max-w-[95%] mx-auto py-10 px-4 sm:px-6 lg:px-4 rounded-3xl shadow-lg",style:{direction:"rtl",fontFamily:"Cairo"},children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4 sm:mb-0",children:c==="all"?"  الحملات الإعلانية المتوفرة حاليًا فى السعودية":"الحملات الإعلانية المتوفرة حاليًا فى "+c}),r.jsxs(M,{to:"/ads",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-full shadow-sm text-white bg-primary hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors duration-200",children:["عرض كل الاعلانات",r.jsx(D,{className:"mr-2  h-5 w-5","aria-hidden":"true"})]})]}),r.jsx("div",{className:"",children:r.jsx(U,{slidesPerView:1,spaceBetween:10,pagination:{clickable:!0},breakpoints:{640:{slidesPerView:2,spaceBetween:20},768:{slidesPerView:3,spaceBetween:40},1024:{slidesPerView:4,spaceBetween:50}},modules:[V],className:"mySwiper",children:i.map((t,o)=>{var f;return r.jsx(_,{children:r.jsx(ce,{Title:(t==null?void 0:t.title)||"No Title",Link:`${(t==null?void 0:t.id)||"#"}`,Img:((f=t==null?void 0:t.images)==null?void 0:f[0])||"/placeholder.jpg",altText:`Image of ${(t==null?void 0:t.title)||"Advertisement"}`,des:(t==null?void 0:t.description)||"No Description Available",category:(t==null?void 0:t.category)||"Uncategorized",date:(t==null?void 0:t.date)||"Unknown Date",views:(t==null?void 0:t.views)||0},(t==null?void 0:t.id)||o)},(t==null?void 0:t.id)||o)})})}),i.length===0&&r.jsx("div",{className:"text-center py-10",children:r.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:c==="all"?"  لا توجد حملات إعلانية متوفرة حاليًا":"لا توجد حملات إعلانية متوفرة حاليًا فى "+c})})]})};export{ue as default};
