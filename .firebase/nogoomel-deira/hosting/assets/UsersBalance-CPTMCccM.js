import{i as v,r as a,j as e,c as L}from"./index-Qhtfuz3P.js";import{u as G}from"./index.esm-CbUVYW22.js";import{I as O,_ as U}from"./index-DE0r-VE5.js";import{l as P}from"./index-EWDoBwto.js";/* empty css                            */import{G as M}from"./data-BQug-B3m.js";import"./card-B63RAl77.js";import"./tooltip-CmQkpYeJ.js";import"./index-Chjiymov.js";import"./index-tm6m0-AC.js";import"./index-COL0MHZf.js";import"./index-D-UOvYd6.js";import"./index-B8hpDO9K.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=v("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=v("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=v("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=v("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]),_=({selectedUserUid:m,usersData:h,onSave:u})=>{const{register:N,handleSubmit:c,reset:g,formState:{errors:b}}=G();a.useState([]);const[d,o]=a.useState(0),[y,x]=a.useState(!1);a.useEffect(()=>{const t=h.find(r=>r.Uid===m);t&&(g(t),o(t.balance||0))},[m,h,g]);const i=t=>{o(r=>{const p=Math.max(0,r+t),f=document.getElementById("balance-input");return f.classList.add("scale-105"),setTimeout(()=>f.classList.remove("scale-105"),200),p})},n=t=>{x(!0);const r=JSON.parse(t.verified),p=`سيتم تغيير مبلغ النجم إلى ${d} ريال و ${r?"وتفعيل الحساب":"إلغاء تفعيل الحساب"}`;P.confirmAlert({title:"تأكيد الحفظ",message:p,buttons:[{label:"نعم",onClick:()=>{u({...t,verified:r,balance:d}),U.success("تم حفظ التعديلات بنجاح"),x(!1)}},{label:"إلغاء",onClick:()=>{U.error("تم إلغاء العملية"),x(!1)}}]})};return e.jsxs("div",{className:"max-w-4xl mx-auto mt-10 bg-white rounded-xl shadow-lg transition-all duration-300 hover:shadow-xl",children:[e.jsx("div",{className:"text-center border-b border-gray-100 bg-gradient-to-r from-blue-50 to-purple-50 p-6 rounded-t-xl",children:e.jsxs("h2",{className:"flex items-center justify-center gap-2 text-3xl font-bold text-gray-800",children:[e.jsx(D,{className:"h-8 w-8 text-blue-500"}),"بيانات الرصيد والحالة"]})}),e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:c(n),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-right text-gray-700 font-medium",children:"حالة المستخدم"}),e.jsxs("select",{...N("verified"),className:"w-full p-3 rounded-lg bg-white border border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200",children:[e.jsxs("option",{value:"true",className:"flex items-center gap-2",children:[e.jsx(B,{className:"inline h-4 w-4 text-green-500"}),"تم القبول"]}),e.jsxs("option",{value:"false",className:"flex items-center gap-2",children:[e.jsx(A,{className:"inline h-4 w-4 text-yellow-500"}),"قيد المراجعة"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-right text-gray-700 font-medium",children:"الرصيد"}),e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(R,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{id:"balance-input",type:"number",value:d,readOnly:!0,className:"w-full p-3 pr-12 rounded-lg bg-white border border-gray-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"flex gap-2",children:[10,20].map(t=>e.jsxs("button",{type:"button",onClick:()=>i(t),className:"flex-1 py-2 px-4 rounded-lg bg-green-50 hover:bg-green-100 text-green-600 border border-green-200 transition-colors duration-200",children:["+",t]},`increase-${t}`))}),e.jsx("div",{className:"flex gap-2",children:[10,20].map(t=>e.jsxs("button",{type:"button",onClick:()=>i(-t),className:"flex-1 py-2 px-4 rounded-lg bg-red-50 hover:bg-red-100 text-red-600 border border-red-200 transition-colors duration-200",children:["-",t]},`decrease-${t}`))})]})]})]})]}),e.jsx("button",{type:"submit",disabled:y,className:"w-full h-12 rounded-lg bg-gradient-to-r from-sky-900 to-sky-700 hover:from-sky-700 hover:to-sky-900 text-white font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:y?"جاري الحفظ...":"حفظ التعديلات"})]})}),e.jsx(O,{position:"top-center",reverseOrder:!1})]})},ee=()=>{var C;const[m,h]=a.useState([]),{allUsers:u,updateUser:N}=L(),[c,g]=a.useState("all"),[b,d]=a.useState("all"),[o,y]=a.useState(""),x=m.filter(s=>{var w;const l=c==="all"||s.govern===c,j=b==="all"||((w=s.area)==null?void 0:w.includes(b)),$=s.name.toLowerCase().includes(o.toLowerCase());return l&&j&&$}),[i,n]=a.useState(1),t=20,r=i*t,p=r-t,f=x.slice(p,r),k=Math.ceil(x.length/t);a.useState(""),a.useEffect(()=>{const s=u;h(s),console.log("users",s)},[u]);const[S,I]=a.useState(null),E=s=>{h(l=>l.map(j=>j.Uid===s.Uid?s:j)),N(s)};return a.useEffect(()=>{n(1)},[o]),e.jsxs("div",{className:"grow md:p-8 p-2 dark:bg-gray-800 h-full",children:[e.jsx("h2",{className:"text-2xl mb-4",children:"النجوم"}),e.jsxs("div",{className:"mt-6 bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 w-full max-w-screen overflow-x-auto",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex gap-4 mb-4",children:[e.jsxs("select",{value:c,onChange:s=>{g(s.target.value),d("all"),n(1)},className:"border rounded px-2 py-1",children:[e.jsx("option",{value:"all",children:"كل المناطق"}),M.map(s=>e.jsx("option",{value:s.name,children:s.name},s.name))]}),e.jsxs("select",{value:b,onChange:s=>{d(s.target.value),n(1)},className:"border rounded px-2 py-1",disabled:c==="all",children:[e.jsx("option",{value:"all",children:"كل المحافظات"}),c!=="all"&&((C=M.find(s=>s.name===c))==null?void 0:C.subGovernments.map(s=>e.jsx("option",{value:s,children:s},s)))]})]}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",value:o,onChange:s=>y(s.target.value),placeholder:"ابحث بالاسم",className:"border rounded px-4 py-2 w-full"})})]}),e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"بيانات النجوم"}),e.jsxs("table",{className:"table-auto w-full  text-sm md:text-base",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"py-2 px-4 text-right min-w-36 ",children:"الاسم"}),e.jsx("th",{className:"py-2 px-4 text-right",children:"المنطقة"}),e.jsx("th",{className:"py-2 px-4 text-right",children:"الهاتف"}),e.jsx("th",{className:"py-2 px-4 text-right",children:"الرصيد"}),e.jsx("th",{className:"py-2 px-4 text-right",children:"عدد الحملات"}),e.jsx("th",{className:"py-2 px-4 text-center",children:"القبول"}),e.jsx("th",{className:"py-2 px-4 text-right",children:"فئة النجم"})]})}),e.jsx("tbody",{children:f.map((s,l)=>s.role==="star"&&e.jsxs("tr",{onClick:()=>I(s.Uid),className:`border-b hover:bg-gray-100 dark:hover:bg-gray-700 ${s.Uid===S?"bg-gray-200 dark:bg-gray-600":""}`,children:[e.jsx("td",{className:"py-2 px-4",children:s.name}),e.jsx("td",{className:"py-2 px-4",children:s.govern}),e.jsx("td",{className:"py-2 px-4",children:s.phone}),e.jsx("td",{className:"py-2 px-4",children:s.balance}),e.jsx("td",{className:"py-2 px-4",children:s.ads.length}),e.jsx("td",{className:"py-2 px-4 text-center",children:e.jsx("span",{className:`${s.verified?"text-green-500 font-bold":"text-red-500 font-bold"}`,children:s.verified?"مقبول":"قيد المراجعة"})}),e.jsx("td",{className:"py-2 px-4",children:s.accountType})]},l))})]}),e.jsxs("div",{className:"flex justify-center mt-4",children:[e.jsx("button",{onClick:()=>n(s=>Math.max(s-1,1)),disabled:i===1,className:"px-4 py-2 mx-1 bg-gray-200 rounded-lg dark:bg-gray-700 disabled:opacity-50",children:"السابق"}),Array.from({length:k},(s,l)=>e.jsx("button",{onClick:()=>n(l+1),className:`px-4 py-2 mx-1 rounded-lg ${i===l+1?"bg-blue-500 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:l+1},l)),e.jsx("button",{onClick:()=>n(s=>Math.min(s+1,k)),disabled:i===k,className:"px-4 py-2 mx-1 bg-gray-200 rounded-lg dark:bg-gray-700 disabled:opacity-50",children:"التالي"})]})]}),S&&e.jsx(_,{selectedUserUid:S,usersData:m,onSave:E})]})};export{ee as default};
