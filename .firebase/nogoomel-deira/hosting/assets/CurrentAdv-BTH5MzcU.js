import{i as R,r as p,j as o,c as _,L as D}from"./index-D9rFWhwf.js";import{A as B}from"./arrow-left-BxsBx66f.js";import{S as H,P as U,N as M,a as G}from"./navigation-DMfct8lI.js";import{m as K}from"./proxy-DZ-hQFwl.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=R("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),V=(...e)=>{console!=null&&console.warn&&(j(e[0])&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e))},F={},E=(...e)=>{j(e[0])&&F[e[0]]||(j(e[0])&&(F[e[0]]=new Date),V(...e))},z=(e,n)=>()=>{if(e.isInitialized)n();else{const a=()=>{setTimeout(()=>{e.off("initialized",a)},0),n()};e.on("initialized",a)}},k=(e,n,a)=>{e.loadNamespaces(n,z(e,a))},$=(e,n,a,i)=>{if(j(a)&&(a=[a]),e.options.preload&&e.options.preload.indexOf(n)>-1)return k(e,a,i);a.forEach(g=>{e.options.ns.indexOf(g)<0&&e.options.ns.push(g)}),e.loadLanguages(n,z(e,i))},W=(e,n,a={})=>!n.languages||!n.languages.length?(E("i18n.languages were undefined or empty",n.languages),!0):n.hasLoadedNamespace(e,{lng:a.lng,precheck:(i,g)=>{var s;if(((s=a.bindI18n)==null?void 0:s.indexOf("languageChanging"))>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!g(i.isLanguageChangingTo,e))return!1}}),j=e=>typeof e=="string",J=e=>typeof e=="object"&&e!==null,X=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Y={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},Q=e=>Y[e],Z=e=>e.replace(X,Q);let ee={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Z};const te=()=>ee;let se;const ne=()=>se,ae=p.createContext();class oe{constructor(){this.usedNamespaces={}}addUsedNamespaces(n){n.forEach(a=>{this.usedNamespaces[a]||(this.usedNamespaces[a]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const re=(e,n)=>{const a=p.useRef();return p.useEffect(()=>{a.current=e},[e,n]),a.current},O=(e,n,a,i)=>e.getFixedT(n,a,i),ie=(e,n,a,i)=>p.useCallback(O(e,n,a,i),[e,n,a,i]),ce=(e,n={})=>{var T,I,L,P;const{i18n:a}=n,{i18n:i,defaultNS:g}=p.useContext(ae)||{},s=a||i||ne();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new oe),!s){E("You will need to pass in an i18next instance by using initReactI18next");const f=(N,b)=>j(b)?b:J(b)&&j(b.defaultValue)?b.defaultValue:Array.isArray(N)?N[N.length-1]:N,w=[f,{},!1];return w.t=f,w.i18n={},w.ready=!1,w}(T=s.options.react)!=null&&T.wait&&E("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const d={...te(),...s.options.react,...n},{useSuspense:A,keyPrefix:C}=d;let c=g||((I=s.options)==null?void 0:I.defaultNS);c=j(c)?[c]:c||["translation"],(P=(L=s.reportNamespaces).addUsedNamespaces)==null||P.call(L,c);const x=(s.isInitialized||s.initializedStoreOnce)&&c.every(f=>W(f,s,d)),t=ie(s,n.lng||null,d.nsMode==="fallback"?c:c[0],C),r=()=>t,l=()=>O(s,n.lng||null,d.nsMode==="fallback"?c:c[0],C),[u,m]=p.useState(r);let y=c.join();n.lng&&(y=`${n.lng}${y}`);const S=re(y),h=p.useRef(!0);p.useEffect(()=>{const{bindI18n:f,bindI18nStore:w}=d;h.current=!0,!x&&!A&&(n.lng?$(s,n.lng,c,()=>{h.current&&m(l)}):k(s,c,()=>{h.current&&m(l)})),x&&S&&S!==y&&h.current&&m(l);const N=()=>{h.current&&m(l)};return f&&(s==null||s.on(f,N)),w&&(s==null||s.store.on(w,N)),()=>{h.current=!1,s&&(f==null||f.split(" ").forEach(b=>s.off(b,N))),w&&s&&w.split(" ").forEach(b=>s.store.off(b,N))}},[s,y]),p.useEffect(()=>{h.current&&x&&m(r)},[s,C,x]);const v=[u,s,x];if(v.t=u,v.i18n=s,v.ready=x,x||!x&&!A)return v;throw new Promise(f=>{n.lng?$(s,n.lng,c,()=>f()):k(s,c,()=>f())})},le=({Title:e,Link:n,Img:a,des:i,category:g})=>{const s={events:"مناسبات",real_estate:"عقارات",cars:"سيارات",electronics:"إلكترونيات",services:"خدمات",home_supplies:"لوازم منزلية",personal_supplies:"لوازم شخصية",animals:"حيوانات"};return o.jsx("div",{className:"my-4 bg-white h-full min-h-[400px] rounded-3xl shadow-lg p-6 transition-all duration-300 hover:shadow-2xl hover:transform hover:scale-[1.02] group",children:o.jsxs("div",{className:"flex flex-col h-full min-h-[400px]",children:[o.jsxs("div",{className:"relative mb-4 overflow-hidden rounded-2xl",children:[o.jsx("img",{src:a,alt:e,className:"w-full h-48 object-cover transition-transform duration-300 group-hover:scale-110"}),g&&o.jsx("span",{className:"absolute top-2 text-white left-2 bg-primary text-primary-foreground px-3 py-1 rounded-full text-xs font-semibold",children:s[g]})]}),o.jsxs("div",{className:"flex-grow",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2 line-clamp-2 min-h-16",children:e}),o.jsx("p",{className:"text-gray-600 mb-4 line-clamp-3 min-h-[4rem]",children:i})]}),o.jsx("div",{className:"mt-auto",children:o.jsxs("a",{href:`ads/${n}`,className:"inline-flex text-white font-semibold items-center justify-center w-full px-4 py-2 bg-primary text-primary-foreground rounded-full text-sm uppercase tracking-wider transition-colors duration-200 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",children:["المزيد",o.jsx(B,{className:"ml-2 h-4 w-4"})]})})]})})},ge=function(){const{t:e}=ce(),[n,a]=p.useState(""),[i,g]=p.useState([]),{getAllAds:s}=_(),d=localStorage.getItem("selectedArea"),A=async function(t,r){const u=`https://maps.googleapis.com/maps/api/geocode/json?latlng=${t},${r}&key=AIzaSyAjI3P4a0X9Woulx01POM5hJxNHxOoq5bE&language=ar`;try{const m=await fetch(u);if(!m.ok)throw new Error(`HTTP error! status: ${m.status}`);const y=await m.json();if(y.status==="OK"&&y.results.length>0){const h=y.results[0].address_components.find(v=>v.types.includes("locality")||v.types.includes("administrative_area_level_2"));return(h==null?void 0:h.long_name)||e("unknownCity")}else throw new Error("No results found")}catch(m){return console.error("Error fetching city name in Arabic:",m),e("failedToFetchCity")}},C=function(){return new Promise(function(t,r){navigator.geolocation?navigator.geolocation.getCurrentPosition(t,r):r(new Error("Geolocation not supported"))})},c=async function(){try{const t=await C(),r=t.coords.latitude,l=t.coords.longitude,u=await A(r,l);a(u),x(u),console.log("City name in Arabic:",u)}catch(t){console.error("Error fetching location or city name:",t)}};p.useEffect(function(){c()},[]);const x=t=>{const l=["الرياض","مكة المكرمة","المدينة المنورة","القصيم","المنطقة الشرقية","عسير","تبوك","حائل","الحدود الشمالية","جازان","نجران","الباحة","الجوف"].find(u=>u.includes(t)||t.includes(u));l?localStorage.setItem("selectedArea",l):console.log("No match found")};return p.useEffect(function(){(async function(){const r=await s();if(console.log(r),!d||d==="all")g(r);else{const l=r.filter(u=>u.region===d);g(l),console.log("Filtered Ads:",l)}})()},[s]),o.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white dark:bg-gray-800 relative mt-4  max-w-[95%] mx-auto py-10 px-4 sm:px-6 lg:px-4 rounded-3xl shadow-lg",style:{direction:"rtl",fontFamily:"Cairo"},children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4 sm:mb-0",children:d==="all"||!d?"  الحملات الإعلانية المتوفرة حاليًا فى السعودية":"الحملات الإعلانية المتوفرة حاليًا فى "+d}),o.jsxs(D,{to:"/ads",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-full shadow-sm text-white bg-primary hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors duration-200",children:["عرض كل الاعلانات",o.jsx(q,{className:"mr-2  h-5 w-5","aria-hidden":"true"})]})]}),o.jsx("div",{className:"",children:o.jsx(H,{slidesPerView:1,spaceBetween:10,navigation:!0,pagination:{clickable:!0},breakpoints:{640:{slidesPerView:2,spaceBetween:20},768:{slidesPerView:3,spaceBetween:40},1024:{slidesPerView:4,spaceBetween:50}},modules:[U,M],className:"mySwiper",children:i.filter(t=>{const r=new Date;return!t.endDate||new Date(t.endDate)>=r}).map((t,r)=>{var l;return o.jsx(G,{children:o.jsx(le,{Title:(t==null?void 0:t.title)||"No Title",Link:`${(t==null?void 0:t.id)||"#"}`,Img:((l=t==null?void 0:t.images)==null?void 0:l[0])||"/placeholder.jpg",altText:`Image of ${(t==null?void 0:t.title)||"Advertisement"}`,des:(t==null?void 0:t.description)||"No Description Available",category:(t==null?void 0:t.category)||"Uncategorized",date:(t==null?void 0:t.date)||"Unknown Date",views:(t==null?void 0:t.views)||0},(t==null?void 0:t.id)||r)},(t==null?void 0:t.id)||r)})})}),i.length===0&&o.jsx("div",{className:"text-center py-10",children:o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:d==="all"?"  لا توجد حملات إعلانية متوفرة حاليًا":"لا توجد حملات إعلانية متوفرة حاليًا فى "+d})})]})};export{ge as default};
