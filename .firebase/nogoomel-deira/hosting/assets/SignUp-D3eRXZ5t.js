import{j as e,r as p,b as E,u as T,c as C,L as w}from"./index-_Ilj38vT.js";import{u as A}from"./index.esm-DuzlAj83.js";import{F as U,a as _,b as $,c as V,d as B,e as M}from"./index-C5pMmMTo.js";import{L as O}from"./Deira-logo2-q4QQy5sZ.js";import{T as l,G as k}from"./data-BEbSXYvH.js";import{I as R,_ as h}from"./index-YxvnNNYc.js";import{C as Y}from"./CheckboxList-BjBAFEcT.js";import"./iconBase-DhLzdDQS.js";const c=({id:n,label:o,type:r="text",register:d})=>e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:n,className:"block text-gray-700 text-sm font-bold mb-2",children:o}),e.jsx("input",{id:n,type:r,className:"w-full px-3 py-2 border rounded-lg focus:outline-none",...d(n)})]}),q=({register:n})=>{const o=[{id:"facebook",icon:e.jsx(U,{className:"text-blue-600"})},{id:"twitter",icon:e.jsx(_,{className:"text-blue-400"})},{id:"snapchat",icon:e.jsx($,{className:"text-yellow-500"})},{id:"tiktok",icon:e.jsx(V,{className:"text-black"})},{id:"instagram",icon:e.jsx(B,{className:"text-pink-500"})},{id:"youtube",icon:e.jsx(M,{className:"text-red-600"})}],[r,d]=p.useState(1),t=i=>{i.preventDefault(),r<o.length&&d(m=>m+1)};return e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-bold text-center mb-4",children:"روابط  التواصل الاجتماعى"}),o.slice(0,r).map(({id:i,icon:m})=>e.jsx(c,{id:i,type:"url",label:e.jsx("span",{className:"flex items-center gap-2"}),register:n},i)),r<o.length&&e.jsx("button",{onClick:t,type:"button",className:"mt-4 px-4 py-2 bg-primary text-white rounded hover:bg-blue-700",children:"اضف المزيد +"})]})},te=()=>{const{signUp:n}=E(),o=T(),[r,d]=p.useState([]),{register:t,handleSubmit:i}=A(),[m,f]=p.useState(null),[z,j]=p.useState(!1),{SendSignupNotification:S}=C(),[F,g]=p.useState([]),I=s=>{g([]);const x=s.target.value,a=k.find(u=>u.name===x);d(a?a.subGovernments:[])},N=s=>s.includes("auth/email-already-in-use")?"هذا البريد الإلكتروني مستخدم بالفعل.":s.includes("auth/weak-password")?"كلمة المرور ضعيفة جدًا. يجب أن تحتوي على 6 أحرف على الأقل.":"حدث خطأ غير معروف. الرجاء المحاولة مرة أخرى.",P=async s=>{const x=`تم تسجيل حساب جديد بواسطة ${s.name} - ${s.email} وبانتظار المراجعة`,a=new Date,u=!1;if(!s.privacyPolicy){h.error("يجب الموافقة على سياسة الخصوصية");return}if(s.confirmPassword!==s.password){h.error("كلمة المرور غير متطابقة");return}if(!/^\d{10,11}$/.test(s.phone)){h.error("يجب أن يكون رقم الهاتف مكوناً من 10 أو 11 رقماً ويتكون من أرقام فقط");return}try{f(null),j(!0);const{email:b,password:G,confirmPassword:H,...L}=s;let y={...L,area:F};console.log("NewData : ",y);const v=await n(b,G,y,"star");v.success?(h.success("تم تسجيل الحساب بنجاح!"),S({message:x,readed:u,time:a},"allAdmin"),o("/status")):f(N(v.error))}catch(b){f(N(b.code)),console.error("Error during submission:",b.message)}finally{j(!1)}},D=(s,x)=>{g(a=>{if(x){if(!a.includes(s))return[...a,s]}else return a.filter(u=>u!==s);return a})};return e.jsxs("div",{className:"PatternBG py-10 flex items-center justify-center min-h-screen",children:[e.jsxs("div",{className:"w-full max-w-7xl bg-white p-6 rounded-lg shadow-md",children:[e.jsx("img",{src:O,alt:"logo",className:"w-10 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:l.title}),m&&e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[e.jsx("strong",{className:"font-bold",children:" خطأ! "}),e.jsx("span",{className:"block sm:inline",children:m})]}),e.jsxs("form",{onSubmit:i(P),children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{id:"name",label:l.name,register:t}),e.jsx(c,{id:"email",label:l.email,type:"email",register:t}),e.jsx(c,{id:"phone",label:l.phone,register:t}),e.jsx(c,{id:"password",label:l.password,type:"password",register:t}),e.jsx(c,{id:"confirmPassword",label:"تاكيد كلمة المرور",type:"password",register:t}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700",children:l.area}),e.jsxs("select",{className:"w-full px-3 py-2 border rounded-lg focus:outline-none",...t("govern"),onChange:I,children:[e.jsx("option",{value:"",children:"اختر المنطقة"}),k.map(s=>e.jsx("option",{value:s.name,children:s.name},s.name))]})]}),r.length>0?e.jsx("div",{className:"mb-4",children:e.jsx(Y,{text:"اختر المحافظات",selected:D,items:r})}):e.jsxs("div",{children:[e.jsx("h6",{className:"mt-10  font-semibold text-black",children:"اختيار المحافظات"}),e.jsx("div",{className:"p-4 bg-red-50 rounded-lg text-center",children:e.jsx("p",{className:"text-sm text-gray-600",children:"يجب تحديد المنطقة أولًا"})})]}),e.jsx("input",{type:"hidden",...t("accountType"),value:"عادي"})]}),e.jsx(q,{register:t})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"block text-gray-700",children:[e.jsx("input",{type:"checkbox",className:"mr-2",...t("privacyPolicy")}),l.privacyPolicy,e.jsxs("a",{href:"/privacy-policy",target:"_blank",rel:"noopener noreferrer",className:"text-blue-700 font-bold",children:[" ",l.privacyPolicyLink]})]})}),e.jsx("div",{className:"w-full mx-auto flex flex-col",children:e.jsx("button",{type:"submit",className:"w-fit px-20 mx-auto bg-indigo-600 text-white py-2 mt-6 rounded-lg hover:bg-indigo-700",children:l.signUp})}),e.jsxs("div",{className:"w-full mx-auto flex flex-row justify-center items-center gap-20 p-4",children:[e.jsx(w,{to:"/login",className:"text-blue-500 hover:text-blue-700 transition font-semibold hover:underline","aria-label":"الانتقال إلى تسجيل الدخول",children:"تسجيل الدخول"}),e.jsx(w,{to:"/",className:"text-blue-500 hover:text-blue-700 transition font-semibold hover:underline","aria-label":"العودة إلى الصفحة الرئيسية",children:"الصفحة الرئيسية"})]})]})]}),e.jsx(R,{position:"top-center",reverseOrder:!1})]})};export{te as default};
