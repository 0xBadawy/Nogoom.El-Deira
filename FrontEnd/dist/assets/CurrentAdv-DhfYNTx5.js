import{r as p,j as o,f as z,L as D}from"./index-CZzhY4wm.js";import{A as R,C as U}from"./chevron-left-C_njyaeS.js";import{S as B,P as G,N as H,a as M}from"./navigation-C5Wix4PQ.js";import{m as K}from"./proxy-Duol71bV.js";const q=(e,n,a,r)=>{var t,l,A,v;const i=[a,{code:n,...r||{}}];if((l=(t=e==null?void 0:e.services)==null?void 0:t.logger)!=null&&l.forward)return e.services.logger.forward(i,"warn","react-i18next::",!0);C(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),(v=(A=e==null?void 0:e.services)==null?void 0:A.logger)!=null&&v.warn?e.services.logger.warn(...i):console!=null&&console.warn&&console.warn(...i)},O={},S=(e,n,a,r)=>{C(a)&&O[a]||(C(a)&&(O[a]=new Date),q(e,n,a,r))},F=(e,n)=>()=>{if(e.isInitialized)n();else{const a=()=>{setTimeout(()=>{e.off("initialized",a)},0),n()};e.on("initialized",a)}},T=(e,n,a)=>{e.loadNamespaces(n,F(e,a))},_=(e,n,a,r)=>{if(C(a)&&(a=[a]),e.options.preload&&e.options.preload.indexOf(n)>-1)return T(e,a,r);a.forEach(i=>{e.options.ns.indexOf(i)<0&&e.options.ns.push(i)}),e.loadLanguages(n,F(e,r))},V=(e,n,a={})=>!n.languages||!n.languages.length?(S(n,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:n.languages}),!0):n.hasLoadedNamespace(e,{lng:a.lng,precheck:(r,i)=>{var t;if(((t=a.bindI18n)==null?void 0:t.indexOf("languageChanging"))>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,e))return!1}}),C=e=>typeof e=="string",W=e=>typeof e=="object"&&e!==null,J=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,X={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},Y=e=>X[e],Q=e=>e.replace(J,Y);let Z={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Q};const ee=()=>Z;let se;const te=()=>se,ne=p.createContext();class ae{constructor(){this.usedNamespaces={}}addUsedNamespaces(n){n.forEach(a=>{this.usedNamespaces[a]||(this.usedNamespaces[a]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const re=(e,n)=>{const a=p.useRef();return p.useEffect(()=>{a.current=e},[e,n]),a.current},$=(e,n,a,r)=>e.getFixedT(n,a,r),oe=(e,n,a,r)=>p.useCallback($(e,n,a,r),[e,n,a,r]),ie=(e,n={})=>{var k,I,P,L;const{i18n:a}=n,{i18n:r,defaultNS:i}=p.useContext(ne)||{},t=a||r||te();if(t&&!t.reportNamespaces&&(t.reportNamespaces=new ae),!t){S(t,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const g=(N,b)=>C(b)?b:W(b)&&C(b.defaultValue)?b.defaultValue:Array.isArray(N)?N[N.length-1]:N,w=[g,{},!1];return w.t=g,w.i18n={},w.ready=!1,w}(k=t.options.react)!=null&&k.wait&&S(t,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const l={...ee(),...t.options.react,...n},{useSuspense:A,keyPrefix:v}=l;let d=i||((I=t.options)==null?void 0:I.defaultNS);d=C(d)?[d]:d||["translation"],(L=(P=t.reportNamespaces).addUsedNamespaces)==null||L.call(P,d);const x=(t.isInitialized||t.initializedStoreOnce)&&d.every(g=>V(g,t,l)),s=oe(t,n.lng||null,l.nsMode==="fallback"?d:d[0],v),c=()=>s,u=()=>$(t,n.lng||null,l.nsMode==="fallback"?d:d[0],v),[f,h]=p.useState(c);let y=d.join();n.lng&&(y=`${n.lng}${y}`);const E=re(y),m=p.useRef(!0);p.useEffect(()=>{const{bindI18n:g,bindI18nStore:w}=l;m.current=!0,!x&&!A&&(n.lng?_(t,n.lng,d,()=>{m.current&&h(u)}):T(t,d,()=>{m.current&&h(u)})),x&&E&&E!==y&&m.current&&h(u);const N=()=>{m.current&&h(u)};return g&&(t==null||t.on(g,N)),w&&(t==null||t.store.on(w,N)),()=>{m.current=!1,t&&(g==null||g.split(" ").forEach(b=>t.off(b,N))),w&&t&&w.split(" ").forEach(b=>t.store.off(b,N))}},[t,y]),p.useEffect(()=>{m.current&&x&&h(c)},[t,v,x]);const j=[f,t,x];if(j.t=f,j.i18n=t,j.ready=x,x||!x&&!A)return j;throw new Promise(g=>{n.lng?_(t,n.lng,d,()=>g()):T(t,d,()=>g())})},ce=({Title:e,Link:n,Img:a,des:r,category:i})=>{const t={events:"مناسبات",real_estate:"عقارات",cars:"سيارات",electronics:"إلكترونيات",services:"خدمات",home_supplies:"لوازم منزلية",personal_supplies:"لوازم شخصية",animals:"حيوانات"};return o.jsx("div",{className:"my-4 bg-white h-full min-h-[400px] rounded-3xl shadow-lg p-6 transition-all duration-300 hover:shadow-2xl hover:transform hover:scale-[1.02] group",children:o.jsxs("div",{className:"flex flex-col h-full min-h-[400px]",children:[o.jsxs("div",{className:"relative mb-4 overflow-hidden rounded-2xl",children:[o.jsx("img",{src:a,alt:e,className:"w-full h-48 object-cover transition-transform duration-300 group-hover:scale-110"}),i&&o.jsx("span",{className:"absolute top-2 text-white left-2 bg-primary text-primary-foreground px-3 py-1 rounded-full text-xs font-semibold",children:t[i]})]}),o.jsxs("div",{className:"flex-grow",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2 line-clamp-2 min-h-16",children:e}),o.jsx("p",{className:"text-gray-600 mb-4 line-clamp-3 min-h-[4rem]",children:r})]}),o.jsx("div",{className:"mt-auto",children:o.jsxs("a",{href:`ads/${n}`,className:"inline-flex text-white font-semibold items-center justify-center w-full px-4 py-2 bg-primary text-primary-foreground rounded-full text-sm uppercase tracking-wider transition-colors duration-200 hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",children:["المزيد",o.jsx(R,{className:"ml-2 h-4 w-4"})]})})]})})},ge=function(){const{t:e}=ie(),[n,a]=p.useState(""),[r,i]=p.useState([]),{getAllAds:t}=z(),l=localStorage.getItem("selectedArea"),A=async function(s,c){const f=`https://maps.googleapis.com/maps/api/geocode/json?latlng=${s},${c}&key=AIzaSyAjI3P4a0X9Woulx01POM5hJxNHxOoq5bE&language=ar`;try{const h=await fetch(f);if(!h.ok)throw new Error(`HTTP error! status: ${h.status}`);const y=await h.json();if(y.status==="OK"&&y.results.length>0){const m=y.results[0].address_components.find(j=>j.types.includes("locality")||j.types.includes("administrative_area_level_2"));return(m==null?void 0:m.long_name)||e("unknownCity")}else throw new Error("No results found")}catch(h){return console.error("Error fetching city name in Arabic:",h),e("failedToFetchCity")}},v=function(){return new Promise(function(s,c){navigator.geolocation?navigator.geolocation.getCurrentPosition(s,c):c(new Error("Geolocation not supported"))})},d=async function(){try{const s=await v(),c=s.coords.latitude,u=s.coords.longitude,f=await A(c,u);a(f),x(f),console.log("City name in Arabic:",f)}catch(s){console.error("Error fetching location or city name:",s)}};p.useEffect(function(){d()},[]);const x=s=>{const u=["الرياض","مكة المكرمة","المدينة المنورة","القصيم","المنطقة الشرقية","عسير","تبوك","حائل","الحدود الشمالية","جازان","نجران","الباحة","الجوف"].find(f=>f.includes(s)||s.includes(f));u?localStorage.setItem("selectedArea",u):console.log("No match found")};return p.useEffect(function(){(async function(){const c=await t();if(console.log(c),!l||l==="all")i(c);else{const u=c.filter(f=>f.region===l);i(u),console.log("Filtered Ads:",u)}})()},[t]),o.jsxs(K.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white dark:bg-gray-800 relative mt-4  max-w-[95%] mx-auto py-10 px-4 sm:px-6 lg:px-4 rounded-3xl shadow-lg",style:{direction:"rtl",fontFamily:"Cairo"},children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-8",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4 sm:mb-0",children:l==="all"||!l?"  الحملات الإعلانية المتوفرة حاليًا فى السعودية":"الحملات الإعلانية المتوفرة حاليًا فى "+l}),o.jsxs(D,{to:"/ads",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-full shadow-sm text-white bg-primary hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors duration-200",children:["عرض كل الاعلانات",o.jsx(U,{className:"mr-2  h-5 w-5","aria-hidden":"true"})]})]}),o.jsx("div",{className:"",children:o.jsx(B,{slidesPerView:1,spaceBetween:10,navigation:!0,pagination:{clickable:!0},breakpoints:{640:{slidesPerView:2,spaceBetween:20},768:{slidesPerView:3,spaceBetween:40},1024:{slidesPerView:4,spaceBetween:50}},modules:[G,H],className:"mySwiper",children:r.filter(s=>{const c=new Date;return!s.endDate||new Date(s.endDate)>=c}).map((s,c)=>{var u;return o.jsx(M,{children:o.jsx(ce,{Title:(s==null?void 0:s.title)||"No Title",Link:`${(s==null?void 0:s.id)||"#"}`,Img:((u=s==null?void 0:s.images)==null?void 0:u[0])||"/placeholder.jpg",altText:`Image of ${(s==null?void 0:s.title)||"Advertisement"}`,des:(s==null?void 0:s.description)||"No Description Available",category:(s==null?void 0:s.category)||"Uncategorized",date:(s==null?void 0:s.date)||"Unknown Date",views:(s==null?void 0:s.views)||0},(s==null?void 0:s.id)||c)},(s==null?void 0:s.id)||c)})})}),r.length===0&&o.jsx("div",{className:"text-center py-10",children:o.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:l==="all"?"  لا توجد حملات إعلانية متوفرة حاليًا":"لا توجد حملات إعلانية متوفرة حاليًا فى "+l})})]})};export{ge as default};
