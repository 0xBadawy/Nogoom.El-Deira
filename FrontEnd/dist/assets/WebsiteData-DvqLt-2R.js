import{e as v,r,j as a,c as p,d as o,f as N,v as k,h as D,s as S}from"./index-DA4Gzd_l.js";import{u as I}from"./index.esm-Dwi1UnKn.js";import{F as A}from"./FormField-CmYPiM8P.js";import{P as R}from"./PageLoader-Cu1VekL8.js";import"./Deira-logo2-q4QQy5sZ.js";const E=()=>{const{register:c,handleSubmit:f,reset:d}=I(),{getHomeData:x}=v(),[h,n]=r.useState(!1),[m,g]=r.useState(!1),[l,b]=r.useState({image1:{file:null,preview:null,url:""},image2:{file:null,preview:null,url:""}});r.useEffect(()=>{(async()=>{try{n(!0);const s=(await p.get("/dashboard/defult")).data;b(i=>({image1:{...i.image1,url:s.image1},image2:{...i.image2,url:s.image2}})),d(s)}catch{o.error("فشل في تحميل البيانات")}finally{n(!1)}})()},[x,d]);const u=async(e,t)=>{if(!e)return null;const s=N(S,`images/${t}`);return await k(s,e),await D(s)},y=(e,t)=>{const s=e.target.files[0];s&&b(i=>({...i,[t]:{...i[t],file:s,preview:URL.createObjectURL(s)}}))},w=async e=>{g(!0);try{const t={...e};l.image1.file&&(t.image1=await u(l.image1.file,"image1")),l.image2.file&&(t.image2=await u(l.image2.file,"image2")),await p.post("/dashboard/update",t),o.success("تم تحديث البيانات بنجاح"),d()}catch{o.error("حدث خطأ أثناء تحديث البيانات")}finally{g(!1)}},j={mainInfo:[{id:"mainTitle",label:"العنوان الرئيسي للموقع"},{id:"subTitle",label:"العنوان الفرعي للموقع"},{id:"adTitle",label:"عنوان الإعلان للموقع"},{id:"adDescription",label:"وصف الإعلان للموقع",type:"textarea"}],starAds:[{id:"starAd1",label:"إعلان النجوم 1"},{id:"starAd2",label:"إعلان النجوم 2"},{id:"starAd3",label:"إعلان النجوم 3"},{id:"starAd4",label:"إعلان النجوم 4"}],statistics:[{id:"campaignCount",label:"عدد الحملات"},{id:"clientCount",label:"عدد العملاء"},{id:"satisfactionRate",label:"معدل الرضا"},{id:"viewCount",label:"عدد المشاهدات"}],contact:[{id:"phone",label:"رقم الهاتف"},{id:"email",label:"البريد الإلكتروني"},{id:"whatsapp",label:"واتساب"}],socialMedia:[{id:"facebook",label:"رابط فيسبوك"},{id:"instagram",label:"رابط إنستجرام"},{id:"twitter",label:"رابط تويتر"},{id:"snapchat",label:"رابط سناب شات"},{id:"linkedin",label:"رابط لينكد إن"},{id:"youtube",label:"رابط يوتيوب"},{id:"tiktok",label:"رابط تيك توك"}],stores:[{id:"googlePlay",label:"رابط جوجل بلاي"},{id:"appStore",label:"رابط آب ستور"}]};return h?a.jsx(R,{}):a.jsx("div",{className:"min-h-screen p-4 sm:p-6 lg:p-8 bg-gray-50 dark:bg-gray-800",children:a.jsx("div",{className:"max-w-7xl mx-auto bg-white dark:bg-gray-700 rounded-xl shadow-lg",children:a.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[a.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-900 dark:text-white",children:"بيانات الموقع"}),a.jsxs("form",{onSubmit:f(w),className:"space-y-8",children:[Object.entries(j).map(([e,t])=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-200 border-b pb-2",children:[e==="mainInfo"&&"معلومات رئيسية",e==="starAds"&&"إعلانات النجوم",e==="statistics"&&"الإحصائيات",e==="contact"&&"معلومات الاتصال",e==="socialMedia"&&"وسائل التواصل الاجتماعي",e==="stores"&&"متاجر التطبيقات"]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(s=>a.jsx("div",{className:"space-y-2",children:a.jsx(A,{id:s.id,label:s.label,type:s.type,register:c,className:"w-full truncate"})},s.id))})]},e)),a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-200 border-b pb-2",children:"سياسة الخصوصية"}),a.jsx("div",{children:a.jsx("textarea",{...c("privacy"),className:"w-full min-h-[300px] p-3 border rounded-lg resize-y dark:bg-gray-800 dark:text-white"})})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:["image1","image2"].map((e,t)=>a.jsxs("div",{className:"space-y-4",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-white",children:["تحميل الصورة ",t+1]}),a.jsxs("div",{className:"space-y-4",children:[l[e].url&&a.jsx("img",{src:l[e].url,alt:`الصورة الحالية ${t+1}`,className:"w-32 h-32 object-cover rounded-lg"}),l[e].preview&&a.jsx("img",{src:l[e].preview,alt:`معاينة الصورة ${t+1}`,className:"w-32 h-32 object-cover rounded-lg"}),a.jsx("input",{type:"file",accept:"image/*",onChange:s=>y(s,e),className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-violet-50 file:text-violet-700 hover:file:bg-violet-100"})]})]},e))}),a.jsx("button",{type:"submit",disabled:m,className:"w-full max-w-md mx-auto block py-3 px-4 rounded-lg text-white bg-indigo-600 hover:bg-indigo-700 focus:ring-4 focus:ring-indigo-200 disabled:opacity-50 transition duration-200",children:m?"جاري التحديث...":"حفظ التغييرات"})]})]})})})};export{E as default};
