import{r as m,u as b,j as e,L as h,c as f,d as j}from"./index-BOfctVcA.js";import{u as N}from"./index.esm-CWOoCmOq.js";import{a as v,b as w,F as y}from"./index-CwxPEkes.js";import{L}from"./Deira-logo2-q4QQy5sZ.js";import"./iconBase-Ct8gq15V.js";const q=()=>{const[o,i]=m.useState(!1),[d,a]=m.useState(null),x=b(),{register:r,handleSubmit:g,watch:u,formState:{errors:s}}=N(),p=async t=>{var n,c;i(!0),a(null);try{const l=await f.post("/auth/resetpassword",t);j.success("تم تغيير كلمة المرور بنجاح!"),x("/login")}catch(l){console.error(l),((c=(n=l.response)==null?void 0:n.data)==null?void 0:c.message)==="Password reset code not verified"?a("لم يتم التحقق من رمز إعادة تعيين كلمة المرور."):a("حدث خطأ، يرجى المحاولة مرة أخرى.")}i(!1)};return e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-100 p-4",children:e.jsxs("div",{className:"w-full max-w-md bg-white p-8 rounded-lg shadow-lg",children:[e.jsx("img",{src:L,alt:"logo",className:"w-40 mx-auto pb-6"}),e.jsx("h2",{className:"text-2xl font-bold text-center text-gray-800 mb-4",children:"إعادة تعيين كلمة المرور"}),e.jsxs("form",{onSubmit:g(p),className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-1",children:"البريد الإلكتروني"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"email",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-400 pr-10",placeholder:"أدخل بريدك الإلكتروني",...r("email",{required:"البريد الإلكتروني مطلوب."})}),e.jsx(v,{className:"absolute right-3 top-3 text-gray-400"})]}),s.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.email.message})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-1",children:"كلمة المرور الجديدة"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"password",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-400 pr-10",placeholder:"أدخل كلمة المرور الجديدة",...r("password",{required:"كلمة المرور مطلوبة.",minLength:{value:8,message:"يجب أن تكون كلمة المرور أطول من 8 أحرف."},pattern:{value:/.*[A-Za-z].*/,message:"يجب أن تحتوي كلمة المرور على حرف واحد على الأقل."}})}),e.jsx(w,{className:"absolute right-3 top-3 text-gray-400"})]}),s.password&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.password.message})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-1",children:"تأكيد كلمة المرور"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"password",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-400 pr-10",placeholder:"أعد إدخال كلمة المرور",...r("confirmPassword",{required:"يرجى تأكيد كلمة المرور.",validate:t=>t===u("password")||"كلمة المرور غير متطابقة."})}),e.jsx(y,{className:"absolute right-3 top-3 text-gray-400"})]}),s.confirmPassword&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.confirmPassword.message})]}),d&&e.jsx("div",{className:"text-red-600 bg-red-100 border border-red-400 p-2 rounded-lg text-center text-sm",children:d}),e.jsx("button",{type:"submit",disabled:o,className:"w-full bg-indigo-600 text-white font-bold py-2 rounded-lg hover:bg-indigo-500 transition-all duration-300 disabled:bg-gray-400",children:o?"جاري التحقق...":"إعادة تعيين كلمة المرور"})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsx(h,{to:"/login",className:"text-indigo-600 hover:underline text-sm font-semibold",children:"الرجوع لتسجيل الدخول"})})]})})};export{q as default};
