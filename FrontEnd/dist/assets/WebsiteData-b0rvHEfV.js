import{e as C,r,j as e,c as f,d as n,f as A,v as E,h as H,s as T}from"./index-BhGRH4j_.js";import{u as B}from"./index.esm-BaFYeH-U.js";import{F as a}from"./FormField-CL4fDHn6.js";import{P as O}from"./PageLoader-B_Zo61xm.js";import"./Deira-logo2-q4QQy5sZ.js";const K=()=>{const{register:s,handleSubmit:w,reset:c}=B(),{getHomeData:y,addHomeData:W}=C(),[N,o]=r.useState(!1),[m,I]=r.useState(null),[x,U]=r.useState(null),[g,S]=r.useState(""),[j,k]=r.useState(""),[h,D]=r.useState(null),[b,L]=r.useState(null),[F,u]=r.useState(!1);r.useEffect(()=>{o(!0),(async()=>{const l=(await f.get("/dashboard/defult")).data;S(l.image1),k(l.image2),console.log(l),c(l)})(),o(!1)},[y,c]);const v=async(i,t)=>{if(console.log("file"),!i)return null;const l=A(T,`images/${t}`);await E(l,i);const d=await H(l);return console.log(d),d},P=async i=>{try{const t=await f.post("/dashboard/update",i);console.log(t),n.success("تم تحديث البيانات بنجاح")}catch(t){console.error(t),n.error("حدث خطأ أثناء تحديث البيانات")}},R=async i=>{console.log(i),u(!0);try{m&&(i.image1Url=await v(m,"image1")),x&&(i.image2Url=await v(x,"image2"));const t={...i,image1:i.image1Url,image2:i.image2Url};P(t),n.success("تم تحديث البيانات بنجاح"),c()}catch(t){n.error("حدث خطأ أثناء رفع الصور"),console.error(t)}finally{u(!1)}},p=(i,t,l)=>{const d=i.target.files[0];t(d),d&&l(URL.createObjectURL(d))};return e.jsx(e.Fragment,{children:N?e.jsx(O,{}):e.jsx("div",{className:"grow p-8 dark:bg-gray-800",children:e.jsxs("div",{className:"mt-6 bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"بيانات الموقع"}),e.jsxs("form",{onSubmit:w(R),children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(a,{id:"mainTitle",label:"العنوان الرئيسي للموقع",register:s})}),e.jsx("div",{children:e.jsx(a,{id:"subTitle",label:"العنوان الفرعي للموقع",register:s})}),e.jsx("div",{children:e.jsx(a,{id:"adTitle",label:"عنوان الإعلان للموقع",register:s})}),e.jsx("div",{children:e.jsx(a,{id:"adDescription",type:"textarea",label:"وصف الإعلان للموقع",register:s})}),e.jsx("div",{children:e.jsx(a,{id:"starAd1",label:"إعلان النجوم 1",register:s})}),e.jsx("div",{children:e.jsx(a,{id:"starAd2",label:"إعلان النجوم 2",register:s})}),e.jsx("div",{children:e.jsx(a,{id:"starAd3",label:"إعلان النجوم 3",register:s})}),e.jsx("div",{children:e.jsx(a,{id:"starAd4",label:"إعلان النجوم 4",register:s})}),e.jsx("div",{children:e.jsx(a,{id:"campaignCount",label:"عدد الحملات",register:s})}),e.jsx("div",{children:e.jsx(a,{id:"clientCount",label:"عدد العملاء",register:s})}),e.jsx("div",{children:e.jsx(a,{id:"satisfactionRate",label:"معدل الرضا",register:s})}),e.jsx("div",{children:e.jsx(a,{id:"viewCount",label:"عدد المشاهدات",register:s})}),e.jsx("div",{children:e.jsx(a,{id:"phone",label:"رقم الهاتف",register:s})}),e.jsx("div",{children:e.jsx(a,{id:"email",label:"البريد الإلكتروني",register:s})}),e.jsx("div",{children:e.jsx(a,{id:"whatsapp",label:"واتساب",register:s})}),e.jsx("div",{children:e.jsx(a,{id:"facebook",label:"رابط فيسبوك",register:s})}),e.jsx("div",{children:e.jsx(a,{id:"instagram",label:"رابط إنستجرام",register:s})}),e.jsx("div",{children:e.jsx(a,{id:"twitter",label:"رابط تويتر",register:s})}),e.jsx("div",{children:e.jsx(a,{id:"snapchat",label:"رابط سناب شات",register:s})}),e.jsx("div",{children:e.jsx(a,{id:"linkedin",label:"رابط لينكد إن",register:s})}),e.jsx("div",{children:e.jsx(a,{id:"youtube",label:"رابط يوتيوب",register:s})}),e.jsx("div",{children:e.jsx(a,{id:"tiktok",label:"رابط تيك توك",register:s})}),e.jsx("div",{children:e.jsx(a,{id:"googlePlay",label:"رابط جوجل بلاي",register:s})}),e.jsx("div",{children:e.jsx(a,{id:"appStore",label:"رابط آب ستور",register:s})}),e.jsx("div",{className:"col-span-2",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"privacy",className:"text-lg",children:"سياسة الخصوصية"}),e.jsx("textarea",{...s("privacy"),className:"border border-gray-300 p-2 rounded-lg mt-2",style:{minHeight:"300px"}})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-white",children:"تحميل الصورة الأولى"}),g&&e.jsx("img",{src:g,alt:"الصورة الحالية 1",className:"w-32 h-32 mt-2 object-cover rounded-md"}),h&&e.jsx("img",{src:h,alt:"معاينة الصورة الأولى",className:"w-32 h-32 mt-2 object-cover rounded-md"}),e.jsx("input",{type:"file",accept:"image/*",onChange:i=>p(i,I,D),className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-white",children:"تحميل الصورة الثانية"}),j&&e.jsx("img",{src:j,alt:"الصورة الحالية 2",className:"w-32 h-32 mt-2 object-cover rounded-md"}),b&&e.jsx("img",{src:b,alt:"معاينة الصورة الثانية",className:"w-32 h-32 mt-2 object-cover rounded-md"}),e.jsx("input",{type:"file",accept:"image/*",onChange:i=>p(i,U,L),className:"mt-2"})]})]}),e.jsx("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-2 mt-6 rounded-lg hover:bg-indigo-700 flex justify-center items-center",children:F?"تحميل.... ":"تسجيل"})]})]})})})};export{K as default};
