import{r as d,j as e,b as u,e as j,c as N}from"./index-ngQkueUq.js";import{B as f}from"./button-DtGXAHR-.js";import{C as v,a as w,b,c as y}from"./card-B7ZrCCKZ.js";import{f as C}from"./formatDate-D06Lv2oc.js";import{C as E,a as I}from"./chevron-up-Cv-SXeFq.js";import"./index-BOSy6OoM.js";const P=({notification:s})=>{const[l,t]=d.useState(!1);return e.jsxs("div",{onClick:()=>t(!l),className:`p-3 rounded-lg shadow-sm border border-gray-200 transition-all duration-300 cursor-pointer 
                 bg-white hover:shadow-md hover:border-indigo-300`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"w-full overflow-hidden",children:e.jsx("p",{className:"text-sm text-indigo-900 line-clamp-2",children:s==null?void 0:s.message})}),e.jsx("span",{className:"text-gray-500",children:l?e.jsx(E,{size:18}):e.jsx(I,{size:18})})]}),e.jsx("div",{className:`transition-all duration-300 overflow-hidden ${l?"max-h- 4 0 mt-2":"max-h-0"}`,children:e.jsxs("div",{className:"mt-2 text-gray-600 text-xs space-y-1",children:[s==null?void 0:s.sendedUsersId.map(n=>e.jsx("p",{className:"whitespace-normal",children:n.name},n._id)),e.jsx("p",{className:"text-gray-400",children:C(s==null?void 0:s.createdAt)})]})})]},s._id)},z=()=>{const{user:s}=u(),{updateNotificationReaded:l}=j(),[t,n]=d.useState([]),[c,x]=d.useState(1),[i]=d.useState(12),h=async()=>{try{const a=await N.get(`/notifications/group-notifications?userId=${s._id}`);n(a.data.notifications),console.log("response : ",a.data.notifications)}catch(a){console.log("error : ",a)}};d.useEffect(()=>{h()},[]);const m=c*i,p=m-i,o=t==null?void 0:t.slice(p,m),g=a=>x(a);return e.jsxs(v,{className:"p-6 m-6 bg-white rounded-lg shadow-md",children:[e.jsx(w,{children:e.jsx(b,{className:"text-3xl font-bold text-indigo-900",children:"الإشعارات المرسلة"})}),e.jsxs(y,{children:[e.jsx("p",{className:"mb-6 text-gray-600",children:"إدارة الإشعارات المرسلة للمستخدمين."}),e.jsx("div",{className:"space-y-4",children:(o==null?void 0:o.length)>0?o.map((a,r)=>e.jsx(P,{notification:a},r)):e.jsx("p",{className:"text-gray-500",children:"لا توجد إشعارات حالياً."})}),e.jsx("div",{className:"flex justify-center mt-6",children:Array.from({length:Math.ceil((t==null?void 0:t.length)/i)},(a,r)=>e.jsx(f,{onClick:()=>g(r+1),variant:c===r+1?"solid":"outline",className:`mx-1 ${c===r+1?"bg-indigo-500 text-white":"bg-white text-indigo-500"}`,children:r+1},r+1))})]})]})};export{z as default};
