import{r as s,e as f,b as g,j as e,d as n,c as x}from"./index-nrsedvu7.js";import{u as S}from"./index.esm-u7ViTEjM.js";import{U as b}from"./UserSelector2-DueTVFZh.js";import"./data-CyOksF0G.js";const C=()=>{const[h,p]=s.useState([]),[j,N]=s.useState([]),{allUsers:y,SendNotification:w}=f(),[U,v]=s.useState("all"),[D,E]=s.useState("all"),[t,r]=s.useState([]),{user:l}=g(),c=o=>{if(o.message==""){n.error("لا يمكن ارسال رسالة فارغة");return}if(t.length==0){n.error("يجب اختيار مستخدم واحد على الأقل");return}const m={message:o.message,userIds:t,title:"إشعار جديد",serderId:l._id};(async()=>{try{const a=await x.post("/notifications/group-notifications",m);u(),r([])}catch(a){console.log("error : ",a)}})()},{register:i,handleSubmit:d,reset:u,formState:{errors:I}}=S();return s.useEffect(()=>{console.log("selectedUsers : ",t)},[t]),e.jsx("div",{className:" flex items-center justify-center md:p-4 p-2",children:e.jsxs("div",{className:" w-full bg-white rounded-lg shadow-lg md:p-8 p-2",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"إرسال إشعار"}),e.jsx(b,{initialSelectedUsers:[],onSelectionChange:r}),e.jsxs("form",{onSubmit:d(c),className:"space-y-6  mt-6",children:[e.jsxs("div",{className:"",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الرسالة"}),e.jsx("textarea",{...i("message"),className:"w-full h-32 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-200",placeholder:"اكتب الرسالة هنا..."})]}),e.jsx("button",{type:"submit",className:"w-full bg-blue-500 text-white py-3 rounded-lg font-semibold hover:bg-blue-600 transition",children:"ارسال اشعار"})]})]})})};export{C as default};
