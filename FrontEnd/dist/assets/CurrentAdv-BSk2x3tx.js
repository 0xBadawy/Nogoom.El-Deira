import{r as f,f as L,j}from"./index-BLZ4aqdM.js";import"./HomePage-XGDs1SbM.js";import"./Navbar-CPDgIZ_5.js";import"./index-OwdsdsWL.js";import"./data-Csv9xAeZ.js";import"./LoginStar-BsrTecc1.js";import"./PageLoader-zdhIqHiO.js";import"./Deira-logo2-q4QQy5sZ.js";import"./proxy-CV9ZBCC6.js";const G=(e,s,n,o)=>{var t,g,b,E;const i=[n,{code:s,...o||{}}];if((g=(t=e==null?void 0:e.services)==null?void 0:t.logger)!=null&&g.forward)return e.services.logger.forward(i,"warn","react-i18next::",!0);C(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),(E=(b=e==null?void 0:e.services)==null?void 0:b.logger)!=null&&E.warn?e.services.logger.warn(...i):console!=null&&console.warn&&console.warn(...i)},R={},S=(e,s,n,o)=>{C(n)&&R[n]||(C(n)&&(R[n]=new Date),G(e,s,n,o))},k=(e,s)=>()=>{if(e.isInitialized)s();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),s()};e.on("initialized",n)}},I=(e,s,n)=>{e.loadNamespaces(s,k(e,n))},_=(e,s,n,o)=>{if(C(n)&&(n=[n]),e.options.preload&&e.options.preload.indexOf(s)>-1)return I(e,n,o);n.forEach(i=>{e.options.ns.indexOf(i)<0&&e.options.ns.push(i)}),e.loadLanguages(s,k(e,o))},$=(e,s,n={})=>!s.languages||!s.languages.length?(S(s,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:s.languages}),!0):s.hasLoadedNamespace(e,{lng:n.lng,precheck:(o,i)=>{var t;if(((t=n.bindI18n)==null?void 0:t.indexOf("languageChanging"))>-1&&o.services.backendConnector.backend&&o.isLanguageChangingTo&&!i(o.isLanguageChangingTo,e))return!1}}),C=e=>typeof e=="string",H=e=>typeof e=="object"&&e!==null,M=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,U={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},K=e=>U[e],q=e=>e.replace(M,K);let W={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:q};const B=()=>W;let D;const J=()=>D,X=f.createContext();class Y{constructor(){this.usedNamespaces={}}addUsedNamespaces(s){s.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const Q=(e,s)=>{const n=f.useRef();return f.useEffect(()=>{n.current=e},[e,s]),n.current},z=(e,s,n,o)=>e.getFixedT(s,n,o),Z=(e,s,n,o)=>f.useCallback(z(e,s,n,o),[e,s,n,o]),V=(e,s={})=>{var v,O,F,P;const{i18n:n}=s,{i18n:o,defaultNS:i}=f.useContext(X)||{},t=n||o||J();if(t&&!t.reportNamespaces&&(t.reportNamespaces=new Y),!t){S(t,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const d=(w,A)=>C(A)?A:H(A)&&C(A.defaultValue)?A.defaultValue:Array.isArray(w)?w[w.length-1]:w,N=[d,{},!1];return N.t=d,N.i18n={},N.ready=!1,N}(v=t.options.react)!=null&&v.wait&&S(t,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const g={...B(),...t.options.react,...s},{useSuspense:b,keyPrefix:E}=g;let a=i||((O=t.options)==null?void 0:O.defaultNS);a=C(a)?[a]:a||["translation"],(P=(F=t.reportNamespaces).addUsedNamespaces)==null||P.call(F,a);const y=(t.isInitialized||t.initializedStoreOnce)&&a.every(d=>$(d,t,g)),r=Z(t,s.lng||null,g.nsMode==="fallback"?a:a[0],E),c=()=>r,l=()=>z(t,s.lng||null,g.nsMode==="fallback"?a:a[0],E),[u,m]=f.useState(c);let h=a.join();s.lng&&(h=`${s.lng}${h}`);const T=Q(h),p=f.useRef(!0);f.useEffect(()=>{const{bindI18n:d,bindI18nStore:N}=g;p.current=!0,!y&&!b&&(s.lng?_(t,s.lng,a,()=>{p.current&&m(l)}):I(t,a,()=>{p.current&&m(l)})),y&&T&&T!==h&&p.current&&m(l);const w=()=>{p.current&&m(l)};return d&&(t==null||t.on(d,w)),N&&(t==null||t.store.on(N,w)),()=>{p.current=!1,t&&(d==null||d.split(" ").forEach(A=>t.off(A,w))),N&&t&&N.split(" ").forEach(A=>t.store.off(A,w))}},[t,h]),f.useEffect(()=>{p.current&&y&&m(c)},[t,E,y]);const x=[u,t,y];if(x.t=u,x.i18n=t,x.ready=y,y||!y&&!b)return x;throw new Promise(d=>{s.lng?_(t,s.lng,a,()=>d()):I(t,a,()=>d())})},le=function(){const{t:e}=V(),[s,n]=f.useState([]),{getAllAds:o}=L(),[i,t]=f.useState(""),g=localStorage.getItem("selectedArea"),b=async function(r,c){console.log("Getting city name in Arabic for coordinates:",r,c);const u=`https://maps.googleapis.com/maps/api/geocode/json?latlng=${r},${c}&key=AIzaSyAjI3P4a0X9Woulx01POM5hJxNHxOoq5bE&language=ar`;try{const m=await fetch(u);if(!m.ok)throw new Error(`HTTP error! status: ${m.status}`);const h=await m.json();if(h.status==="OK"&&h.results.length>0){const T=h.results[0].address_components;console.log("Address components:",T);const p=T.find(x=>x.types.includes("locality")||x.types.includes("administrative_area_level_2"));return(p==null?void 0:p.long_name)||e("unknownCity")}else throw new Error("No results found")}catch(m){return console.error("Error fetching city name in Arabic:",m),e("failedToFetchCity")}},E=function(){return new Promise(function(r,c){navigator.geolocation?navigator.geolocation.getCurrentPosition(r,c):c(new Error("Geolocation not supported"))})},a=async function(){try{const r=await E(),c=r.coords.latitude,l=r.coords.longitude,u=await b(c,l);t(u),y(u),console.log("City name in Arabic:",u)}catch(r){console.error("Error fetching location or city name:",r)}};f.useEffect(function(){a()},[]);const y=r=>{const l=["الرياض","مكة المكرمة","المدينة المنورة","القصيم","المنطقة الشرقية","عسير","تبوك","حائل","الحدود الشمالية","جازان","نجران","الباحة","الجوف","الكويت"].find(u=>u.includes(r)||r.includes(u));console.log("Matched Area:",l),l?localStorage.setItem("selectedArea",l):console.log("No match found")};return f.useEffect(function(){(async function(){const c=await o();if(console.log(c),!g||g==="all")n(c);else{const l=c.filter(u=>u.region===g);n(l),console.log("Filtered Ads:",l)}})()},[o]),j.jsx(j.Fragment,{})};export{le as default};
