import{d as y,f as C,r as t,j as s,L as h,a as g}from"./index-BLZ4aqdM.js";import{B as R}from"./badge-Cfmp2CDV.js";import{B as n}from"./button-CdQumLxo.js";import{C as f,a as A,b as D,c as P}from"./card-BpfrEXWV.js";import{f as B}from"./formatDate-D06Lv2oc.js";import"./index-D7bPvczS.js";const O=()=>{const{user:p}=y(),{updateNotificationReaded:E}=C(),[c,u]=t.useState([]),[d,i]=t.useState(1),[l]=t.useState(12),N=e=>{(async()=>{const r=await g.put("/notifications/read-notification",{notificationId:e});console.log(r.data),m()})()},m=async()=>{try{const e=await p._id,r=(await g.get("/notifications/notifications",{params:{userId:e}})).data.sort((b,v)=>new Date(v.createdAt)-new Date(b.createdAt));console.log(r),u(r)}catch(e){console.error("Error fetching data:",e)}};t.useEffect(()=>{m()},[]);const x=d*l,j=x-l,o=c.slice(j,x),w=e=>i(e);return s.jsxs(f,{className:"p-6 m-6 bg-white rounded-lg shadow-md",children:[s.jsx(A,{children:s.jsx(D,{className:"text-3xl font-bold text-indigo-900",children:"الإشعارات"})}),s.jsxs(P,{children:[s.jsx("p",{className:"mb-6 text-gray-600",children:"إدارة تفضيلات الإشعارات الخاصة بك هنا."}),s.jsx("div",{className:"space-y-4",children:o.length>0?o.map((e,a)=>s.jsx("div",{className:`p-1 rounded-lg shadow-sm transition-all duration-200 ${e!=null&&e.isRead?"bg-gray-100":"bg-indigo-50"} hover:shadow-md`,children:s.jsxs("div",{className:"flex justify-between items-start flex-col md:flex-row max-w-full overflow-hidden",children:[s.jsxs("div",{className:"w-full text-ellipsis overflow-hidden",children:[(e==null?void 0:e.title)==="مستخدم جديد"?s.jsx(h,{to:"/dashboard/employees",className:"text-indigo-900 font-semibold hover:text-indigo-700",children:s.jsx("p",{className:"text-sm text-indigo-900 whitespace-normal",children:e==null?void 0:e.message})}):s.jsx(h,{to:`/dashboard/users/${e.messageUserId}`,className:"text-indigo-900 font-semibold hover:text-indigo-700",children:s.jsx("p",{className:"text-sm text-indigo-900 whitespace-normal",children:e==null?void 0:e.message})}),s.jsx("p",{className:"text-xs text-gray-500 whitespace-normal",children:B(e==null?void 0:e.createdAt)})]}),s.jsxs("div",{className:"flex items-center space-x-2 gap-1 mt-2 md:mt-0",children:[!(e!=null&&e.isRead)&&s.jsx(n,{onClick:()=>N(e._id),variant:"outline",size:"sm",className:"hover:bg-indigo-100",children:"تم القراءة"}),s.jsx(R,{className:`${e!=null&&e.isRead?"bg-gray-500":"bg-blue-500"} text-white`,children:e!=null&&e.isRead?"مقروءة":"جديدة"})]})]})},a)):s.jsx("p",{className:"text-gray-500",children:"لا توجد إشعارات حالياً."})}),s.jsx("div",{className:"flex justify-center mt-6",children:Array.from({length:Math.ceil(c.length/l)},(e,a)=>s.jsx(n,{onClick:()=>w(a+1),variant:d===a+1?"solid":"outline",className:`mx-1 ${d===a+1?"bg-indigo-500 text-white":"bg-white text-indigo-500"}`,children:a+1},a+1))})]})]})};export{O as default};
