import{r,j as l}from"./index-BRyFHO37.js";import{A as m}from"./data-CyOksF0G.js";const y=({initialData:d={},onSelectionChange:u})=>{const[t,o]=r.useState([]),[a,h]=r.useState([]),f=r.useRef(null),i=r.useRef(null);r.useEffect(()=>{d.areas&&o(d.areas),d.governments&&h(d.governments)},[d]);const g=r.useMemo(()=>m.flatMap(e=>e.subGovernments),[]),b=r.useMemo(()=>t.flatMap(e=>{var s;return((s=m.find(n=>n.name===e))==null?void 0:s.subGovernments)||[]}),[t]);r.useEffect(()=>{u&&u({selectedAreas:t,selectedGovernments:a}),f.current&&(f.current.indeterminate=a.length>0&&a.length<b.length),i.current&&(i.current.indeterminate=t.length>0&&t.length<m.length)},[t,a,b,u]);const v=e=>{const{value:s,checked:n}=e.target;o(c=>n?[...c,s]:c.filter(x=>x!==s))},j=e=>{const{value:s,checked:n}=e.target;h(c=>n?[...c,s]:c.filter(x=>x!==s))},p=e=>{e.target.checked?(o(m.map(s=>s.name)),h(g)):(o([]),h([]))};return l.jsxs("div",{className:"mx-auto w-full bg-white p-6 border rounded-2xl shadow-xl h-fit",children:[l.jsxs("div",{className:"flex items-center mb-4",children:[l.jsx("input",{type:"checkbox",id:"select-all-areas",ref:i,checked:t.length===m.length,onChange:p,className:"w-5 h-5 accent-blue-500 rounded-md"}),l.jsx("label",{htmlFor:"select-all-areas",className:"ml-3 text-gray-800 text-lg",children:"اختر كل المناطق والمحافظات"})]}),l.jsx("div",{className:"border border-gray-300 rounded-lg p-4 bg-gray-50",children:m.map(e=>l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx("input",{type:"checkbox",id:e.name,value:e.name,checked:t.includes(e.name),onChange:v,className:"w-5 h-5 accent-blue-500 rounded-md"}),l.jsx("label",{htmlFor:e.name,className:"ml-3 text-gray-800 text-lg",children:e.name})]}),t.includes(e.name)&&l.jsxs("div",{className:"ml-6",children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx("input",{type:"checkbox",id:`select-all-${e.name}`,checked:a.length>0&&e.subGovernments.every(s=>a.includes(s)),onChange:s=>{h(n=>s.target.checked?[...n,...e.subGovernments.filter(c=>!n.includes(c))]:n.filter(c=>!e.subGovernments.includes(c)))},className:"w-4 h-4 accent-blue-500 rounded-md"}),l.jsxs("label",{htmlFor:`select-all-${e.name}`,className:"ml-2 text-gray-700 text-sm",children:["اختر كل المحافظات في ",e.name]})]}),l.jsx("div",{className:"ml-4 space-y-2",children:e.subGovernments.map(s=>l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:s,value:s,checked:a.includes(s),onChange:j,className:"w-4 h-4 accent-blue-500 rounded-md"}),l.jsx("label",{htmlFor:s,className:"ml-2 text-gray-700 hover:text-blue-600 cursor-pointer text-sm",children:s})]},s))})]})]},e.name))})]})};export{y as A};
