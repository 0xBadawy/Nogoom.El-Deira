import{r as m,f as R,j as _}from"./index-D3SbzoaF.js";import"./HomePage-Bx_-aDjq.js";import"./Navbar-CoAlQWqZ.js";import"./index-FXTkq8BW.js";import"./data-Csv9xAeZ.js";import"./LoginStar-BsrTecc1.js";import"./PageLoader-GWEYK-s2.js";import"./Deira-logo2-q4QQy5sZ.js";import"./proxy-BHB8vgLc.js";const H=(e,s,o,a)=>{var t,y,C,A;const f=[o,{code:s,...a||{}}];if((y=(t=e==null?void 0:e.services)==null?void 0:t.logger)!=null&&y.forward)return e.services.logger.forward(f,"warn","react-i18next::",!0);S(f[0])&&(f[0]=`react-i18next:: ${f[0]}`),(A=(C=e==null?void 0:e.services)==null?void 0:C.logger)!=null&&A.warn?e.services.logger.warn(...f):console!=null&&console.warn&&console.warn(...f)},$={},O=(e,s,o,a)=>{S(o)&&$[o]||(S(o)&&($[o]=new Date),H(e,s,o,a))},F=(e,s)=>()=>{if(e.isInitialized)s();else{const o=()=>{setTimeout(()=>{e.off("initialized",o)},0),s()};e.on("initialized",o)}},P=(e,s,o)=>{e.loadNamespaces(s,F(e,o))},k=(e,s,o,a)=>{if(S(o)&&(o=[o]),e.options.preload&&e.options.preload.indexOf(s)>-1)return P(e,o,a);o.forEach(f=>{e.options.ns.indexOf(f)<0&&e.options.ns.push(f)}),e.loadLanguages(s,F(e,a))},L=(e,s,o={})=>!s.languages||!s.languages.length?(O(s,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:s.languages}),!0):s.hasLoadedNamespace(e,{lng:o.lng,precheck:(a,f)=>{var t;if(((t=o.bindI18n)==null?void 0:t.indexOf("languageChanging"))>-1&&a.services.backendConnector.backend&&a.isLanguageChangingTo&&!f(a.isLanguageChangingTo,e))return!1}}),S=e=>typeof e=="string",M=e=>typeof e=="object"&&e!==null,G=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,K={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},U=e=>K[e],q=e=>e.replace(G,U);let W={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:q};const J=()=>W;let X;const B=()=>X,D=m.createContext();class Q{constructor(){this.usedNamespaces={}}addUsedNamespaces(s){s.forEach(o=>{this.usedNamespaces[o]||(this.usedNamespaces[o]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const Y=(e,s)=>{const o=m.useRef();return m.useEffect(()=>{o.current=e},[e,s]),o.current},z=(e,s,o,a)=>e.getFixedT(s,o,a),Z=(e,s,o,a)=>m.useCallback(z(e,s,o,a),[e,s,o,a]),V=(e,s={})=>{var N,T,j,v;const{i18n:o}=s,{i18n:a,defaultNS:f}=m.useContext(D)||{},t=o||a||B();if(t&&!t.reportNamespaces&&(t.reportNamespaces=new Q),!t){O(t,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const p=(b,x)=>S(x)?x:M(x)&&S(x.defaultValue)?x.defaultValue:Array.isArray(b)?b[b.length-1]:b,E=[p,{},!1];return E.t=p,E.i18n={},E.ready=!1,E}(N=t.options.react)!=null&&N.wait&&O(t,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const y={...J(),...t.options.react,...s},{useSuspense:C,keyPrefix:A}=y;let l=f||((T=t.options)==null?void 0:T.defaultNS);l=S(l)?[l]:l||["translation"],(v=(j=t.reportNamespaces).addUsedNamespaces)==null||v.call(j,l);const w=(t.isInitialized||t.initializedStoreOnce)&&l.every(p=>L(p,t,y)),I=Z(t,s.lng||null,y.nsMode==="fallback"?l:l[0],A),r=()=>I,n=()=>z(t,s.lng||null,y.nsMode==="fallback"?l:l[0],A),[g,i]=m.useState(r);let c=l.join();s.lng&&(c=`${s.lng}${c}`);const h=Y(c),d=m.useRef(!0);m.useEffect(()=>{const{bindI18n:p,bindI18nStore:E}=y;d.current=!0,!w&&!C&&(s.lng?k(t,s.lng,l,()=>{d.current&&i(n)}):P(t,l,()=>{d.current&&i(n)})),w&&h&&h!==c&&d.current&&i(n);const b=()=>{d.current&&i(n)};return p&&(t==null||t.on(p,b)),E&&(t==null||t.store.on(E,b)),()=>{d.current=!1,t&&(p==null||p.split(" ").forEach(x=>t.off(x,b))),E&&t&&E.split(" ").forEach(x=>t.store.off(x,b))}},[t,c]),m.useEffect(()=>{d.current&&w&&i(r)},[t,A,w]);const u=[g,t,w];if(u.t=g,u.i18n=t,u.ready=w,w||!w&&!C)return u;throw new Promise(p=>{s.lng?k(t,s.lng,l,()=>p()):P(t,l,()=>p())})},le=function(){const{t:e}=V(),[s,o]=m.useState([]),{getAllAds:a}=R(),[f,t]=m.useState(""),y=localStorage.getItem("selectedArea"),C=async function(r,n){console.log("Getting city name in Arabic for coordinates:",r,n);const i=`https://maps.googleapis.com/maps/api/geocode/json?latlng=${r},${n}&key=AIzaSyAjI3P4a0X9Woulx01POM5hJxNHxOoq5bE&language=ar`;try{const c=await fetch(i);if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);const h=await c.json();if(h.status==="OK"&&h.results.length>0){const d=h.results[0].address_components;console.log("Address components:",d);const u=d.find(N=>N.types.includes("locality")||N.types.includes("administrative_area_level_2"));return(u==null?void 0:u.long_name)||e("unknownCity")}else throw new Error("No results found")}catch(c){return console.error("Error fetching city name in Arabic:",c),e("failedToFetchCity")}},A=function(){return new Promise(function(r,n){navigator.geolocation?navigator.geolocation.getCurrentPosition(r,n):n(new Error("Geolocation not supported"))})},l=async function(r,n){console.log("Getting city name in Arabic for coordinates:",r,n);const i=`https://maps.googleapis.com/maps/api/geocode/json?latlng=${r},${n}&key=AIzaSyAjI3P4a0X9Woulx01POM5hJxNHxOoq5bE&language=ar`;try{const c=await fetch(i);if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);const h=await c.json();if(h.status==="OK"&&h.results.length>0){const d=h.results[0].address_components;console.log("Address components:",d);const u=d.find(N=>N.types.includes("country"));return(u==null?void 0:u.long_name)||"دولة غير معروفة"}else throw new Error("لم يتم العثور على نتائج")}catch(c){return console.error("خطأ أثناء جلب اسم الدولة:",c),"فشل في جلب اسم الدولة"}},w=async function(){try{const r=await A(),n=r.coords.latitude,g=r.coords.longitude,i=await C(n,g);t(i),I(i),console.log("City name in Arabic:",i)}catch(r){console.error("Error fetching location or city name:",r)}};m.useEffect(function(){w()},[]);const I=r=>{const n=["الرياض","مكة المكرمة","المدينة المنورة","القصيم","المنطقة الشرقية","عسير","تبوك","حائل","الحدود الشمالية","جازان","نجران","الباحة","الجوف","الكويت"],g=n.find(i=>i.includes(r)||r.includes(i));console.log("Matched Area:",g),g?localStorage.setItem("selectedArea",g):async function(){const c=await A(),h=c.coords.latitude,d=c.coords.longitude,u=await l(h,d);console.log("No match found",r),console.log("City name in Arabic:",u);const N=n.find(T=>T.includes(u)||u.includes(T));console.log("Matched Area:",N),N?localStorage.setItem("selectedArea",N):localStorage.setItem("selectedArea","all")}()};return m.useEffect(function(){(async function(){const n=await a();if(console.log(n),!y||y==="all")o(n);else{const g=n.filter(i=>i.region===y);o(g),console.log("Filtered Ads:",g)}})()},[a]),_.jsx(_.Fragment,{})};export{le as default};
