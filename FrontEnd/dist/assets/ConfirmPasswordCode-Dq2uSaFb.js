import{b as p,r as i,u as b,j as e,L as h,c as f,d as j}from"./index-BOfctVcA.js";import{u as N}from"./index.esm-CWOoCmOq.js";import{F as v}from"./index-CwxPEkes.js";import{L as w}from"./Deira-logo2-q4QQy5sZ.js";import"./iconBase-Ct8gq15V.js";const k=()=>{const{resetPassword:y}=p(),[t,r]=i.useState(!1),[a,s]=i.useState(null),c=b(),{register:m,handleSubmit:x,formState:{errors:o}}=N(),u=async g=>{var d,l;r(!0),s(null);try{const n=await f.post("/auth/verifypasswordresetcode",g);j.success("تم التحقق بنجاح! يمكنك الآن إعادة تعيين كلمة المرور."),c("/new-password")}catch(n){((l=(d=n.response)==null?void 0:d.data)==null?void 0:l.message)==="Invalid reset code or expired"?s("الرمز غير صحيح أو منتهي الصلاحية"):s("حدث خطأ، يرجى المحاولة مرة أخرى.")}r(!1)};return e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-50 p-4",children:e.jsxs("div",{className:"w-full max-w-md bg-white p-8 rounded-lg shadow-lg",children:[e.jsx("img",{src:w,alt:"logo",className:"w-40 mx-auto pb-6"}),e.jsx("h2",{className:"text-2xl font-bold text-center text-gray-800 mb-4",children:"استعادة كلمة المرور"}),e.jsxs("div",{className:"bg-green-100 border border-green-400 text-green-700 p-4 rounded-lg shadow-md text-center",children:[e.jsx("h3",{className:"font-bold text-lg",children:"تم إرسال الرابط بنجاح!"}),e.jsx("p",{className:"text-sm",children:"تم إرسال رابط إعادة تعيين كلمة المرور إلى بريدك الإلكتروني. إذا لم تجده، تحقق من قسم البريد العشوائي (Spam)."})]}),e.jsxs("form",{onSubmit:x(u),className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{htmlFor:"resetCode",className:"block text-gray-700 text-sm font-bold mb-1",children:"رمز إعادة تعيين كلمة المرور"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",id:"resetCode",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-400 pr-10",placeholder:"أدخل الرمز",...m("resetCode",{required:"رمز إعادة تعيين كلمة المرور مطلوب."})}),e.jsx(v,{className:"absolute right-3 top-3 text-gray-400"})]}),o.resetCode&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:o.resetCode.message})]}),a&&e.jsx("div",{className:"text-red-600 bg-red-100 border border-red-400 p-2 rounded-lg text-center text-sm",children:a}),e.jsx("button",{type:"submit",disabled:t,className:"w-full bg-indigo-600 text-white font-bold py-2 rounded-lg hover:bg-indigo-500 transition-all duration-300 disabled:bg-gray-400",children:t?"جاري التحقق...":"تحقق"})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsx(h,{to:"/login",className:"text-indigo-600 hover:underline text-sm font-semibold",children:"الرجوع لتسجيل الدخول"})})]})})};export{k as default};
