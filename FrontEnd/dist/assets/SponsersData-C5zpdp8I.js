import{r as n,j as e,a as x,g as M,s as B,h as S,i as U}from"./index-D3SbzoaF.js";import{u as W}from"./index.esm-BWFjDlvZ.js";import{k as t}from"./index-qGYd11lq.js";const P=()=>{const[i,b]=n.useState(0),[a,u]=n.useState(""),[h,c]=n.useState(!1),[g,j]=n.useState([]),d=async()=>{try{const s=await x.get("/sponser");console.log(s.data.data),j(s.data.data)}catch(s){console.error(s)}};n.useEffect(()=>{d()},[]);const{register:v,reset:w,handleSubmit:y,formState:{errors:N}}=W(),k=s=>{console.log(s,a);const m={name:s.name,logo:a};if(!a){alert("يرجى تحميل صورة الراعي");return}(async()=>{try{const l=await x.post("/sponser",m);console.log(l.data),t.success("تم إضافة الراعي بنجاح"),w(),u(""),d()}catch(l){console.error(l),t.error("حدث خطأ أثناء إضافة الراعي")}})()},p=async s=>{if(!s)return;if(!["image/jpeg","image/png","image/gif","image/webp"].includes(s.type)){t.error(`نوع الملف غير مدعوم: ${s.name}`);return}c(!0);const l=M(B,`noUser/images/${s.name}`),f=S(l,s);f.on("state_changed",r=>{const C=r.bytesTransferred/r.totalBytes*100;b(C)},r=>{t.error(`خطأ في رفع الملف: ${r.message}`),c(!1)},async()=>{try{const r=await U(f.snapshot.ref);u(r),console.log("Media URL:",r)}catch(r){t.error(`خطأ في الحصول على رابط الصورة: ${r.message}`)}finally{c(!1)}})},L=async s=>{if(window.confirm("هل أنت متأكد من حذف الراعي؟"))try{const o=await x.delete(`/sponser/${s}`);console.log(o.data),t.success("تم حذف الراعي بنجاح"),d()}catch(o){console.error(o),t.error("حدث خطأ أثناء حذف الراعي")}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-b lue-50 to-gray -100 pt-16 pb-12",children:e.jsxs("div",{className:"max-w- 6xl mx-auto px-4",children:[e.jsxs("div",{className:"p-4 max-w-xl mx-auto bg-white rounded-3xl shadow-lg space-y-6 transition-all duration-300 hover:shadow-xl border border-gray-100 mb-12",children:[e.jsx("div",{className:"flex items-center justify-center mb-2"}),e.jsx("h1",{className:"text-3xl font-bold text-center text-gray-900 tracking-tight",children:"اضافة عميل جديد"}),e.jsxs("form",{onSubmit:y(k),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-semibold text-gray-700",children:"الاسم"}),e.jsx("input",{type:"text",id:"name",className:"block w-full border border-gray-200 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 p-3 transition-all duration-200 bg-gray-50 text-gray-900 placeholder-gray-400 text-right",placeholder:"أدخل الاسم هنا",...v("name",{required:!0}),dir:"rtl"}),N.name&&e.jsx("span",{className:"text-red-500 text-sm font-medium animate-pulse flex justify-end",children:"هذا الحقل مطلوب"})]}),e.jsxs("div",{className:"space-y-4",children:[a?e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:a,alt:"Preview",className:"w-48 h-48 object-cover rounded-full border-4 border-white shadow-md group-hover:scale-105 transition-transform duration-300 cursor-pointer"}),e.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-30 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:[e.jsx("label",{htmlFor:"image-upload",className:"cursor-pointer text-white",children:e.jsx("svg",{className:"w-10 h-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),e.jsx("input",{type:"file",accept:"image/*",onChange:s=>p(s.target.files[0]),className:"hidden",id:"image-upload"})]})]})}):e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"flex justify-center items-center border-2 border-dashed border-blue-200 rounded-2xl w-64 h-64 mx-auto bg-blue-50 hover:border-blue-300 transition-colors duration-200",children:e.jsxs("div",{className:"text-center px-4 py-6",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:s=>p(s.target.files[0]),className:"hidden",id:"image-upload"}),e.jsxs("label",{htmlFor:"image-upload",className:"cursor-pointer inline-flex flex-col items-center",children:[e.jsx("div",{className:"bg-white p-4 rounded-full shadow-md mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})}),e.jsx("span",{className:"block text-sm font-medium text-blue-600 hover:text-blue-700 transition-all duration-200",children:"رفع صورة العميل أو شريك النجاح"}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"PNG, JPG, GIF بحد أقصى 10MB"})]})]})})}),i>0&&i<100&&e.jsxs("div",{className:"w-full bg-gray-100 rounded-full h-2.5 overflow-hidden",children:[e.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full transition-all duration-300 ease-in-out",style:{width:`${i}%`}}),e.jsxs("p",{className:"text-xs text-center text-gray-500 mt-1",children:[i,"%"]})]})]}),e.jsx("div",{className:"space-y-2",children:e.jsx("button",{type:"submit",disabled:h,className:"w-full bg-blue-600 text-white rounded-lg p-4 font-semibold hover:bg-blue-700 focus:ring-4 focus:ring-blue-200 focus:outline-none transition-all duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed transform hover:scale-[1.02] active:scale-[0.98]",children:h?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"جارٍ تحميل الصورة..."]}):e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"إضافة الراعي"]})})})]})]}),e.jsxs("div",{className:"mx-auto px-4 mb-12  ",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-8",children:[e.jsx("div",{className:"h-px w-16 bg-b lue-200"}),e.jsx("h1",{className:"text-3xl font-bold text-center text-gray-900 tracking-tight",children:"قائمة العملاء"}),e.jsx("div",{className:"h-px w-16 bg- blue-200"})]}),e.jsxs("div",{className:"mt-6 flex flex-row flex-wrap justify-center gap-6",children:[g.map(s=>e.jsxs("div",{className:"flex items-center flex-col md:flex-row justify-between md:p-6 p-2 bg-white rounded-xl shadow-md hover:shadow-xl transition-all duration-300 ease-in-out transform hover:-translate-y-1 border border-gray-100 w-full md:w-96",children:[e.jsxs("div",{className:"flex  flex-col md:flex-row  items-center space-x-5 rtl:space-x-reverse",children:[e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("img",{src:s.logo,alt:s.name,className:"w-16 h-16 object-cover rounded-full border-2 border-gray-100 shadow-sm hover:scale-105 transition-transform duration-200"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-blue-500 to-purple-500 opacity-0 rounded-full"})]}),e.jsxs("div",{className:"pr-4   ",children:[e.jsx("h1",{className:"text-lg font-semibold text-gray-900 tracking-tight overflow-hidden",children:s.name}),e.jsx("p",{className:"text-sm mt-2 text-gray-500 text-center",children:"شريك النجاح"})]})]}),e.jsx("button",{className:"bg-red-50 text-red-600 rounded-lg px-4 py-2 font-semibold hover:bg-red-600 hover:text-white focus:ring-4 focus:ring-red-200 focus:outline-none transition-all duration-200 active:scale-95",onClick:()=>L(s._id),children:e.jsxs("span",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 inline-block ml-1 rtl:mr-1 rtl:ml-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"حذف"]})})]},s._id)),g.length===0&&e.jsxs("div",{className:"text-center py-12 px-8 bg-white rounded-xl shadow-md border border-gray-100 w-full max-w-lg",children:[e.jsx("div",{className:"mb-4 flex justify-center",children:e.jsx("div",{className:"bg-blue-50 p-4 rounded-full",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),e.jsx("p",{className:"text-xl font-semibold text-gray-700",children:"لا يوجد رعاة حاليًا"}),e.jsx("p",{className:"text-base text-gray-500 mt-2",children:"أضف رعاة جدد لعرضهم هنا"}),e.jsxs("button",{onClick:()=>document.getElementById("image-upload").click(),className:"mt-6 inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"إضافة راعي جديد"]})]})]})]})]})})};export{P as default};
