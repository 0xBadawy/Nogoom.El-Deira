import{b as f,e as v,r as t,j as s,L as y,c as x}from"./index-BhGRH4j_.js";import{B as C}from"./badge-CPBBXTRC.js";import{B as i}from"./button-BKg7fv5Z.js";import{C as R,a as A,b as D,c as P}from"./card-D37_4B0e.js";import{f as B}from"./formatDate-D06Lv2oc.js";import"./index-B5pA4OD8.js";const O=()=>{const{user:h}=f(),{updateNotificationReaded:E}=v(),[c,g]=t.useState([]),[r,p]=t.useState(1),[d]=t.useState(12),u=e=>{(async()=>{const l=await x.put("/notifications/read-notification",{notificationId:e});console.log(l.data),o()})()},o=async()=>{try{const e=await h._id,l=(await x.get("/notifications/notifications",{params:{userId:e}})).data.sort((w,b)=>new Date(b.createdAt)-new Date(w.createdAt));g(l)}catch(e){console.error("Error fetching data:",e)}};t.useEffect(()=>{o()},[]);const m=r*d,N=m-d,n=c.slice(N,m),j=e=>p(e);return s.jsxs(R,{className:"p-6 m-6 bg-white rounded-lg shadow-md",children:[s.jsx(A,{children:s.jsx(D,{className:"text-3xl font-bold text-indigo-900",children:"الإشعارات"})}),s.jsxs(P,{children:[s.jsx("p",{className:"mb-6 text-gray-600",children:"إدارة تفضيلات الإشعارات الخاصة بك هنا."}),s.jsx("div",{className:"space-y-4",children:n.length>0?n.map((e,a)=>s.jsx("div",{className:`p-1 rounded-lg shadow-sm transition-all duration-200 ${e!=null&&e.isRead?"bg-gray-100":"bg-indigo-50"} hover:shadow-md`,children:s.jsxs("div",{className:"flex justify-between items-start flex-col md:flex-row max-w-full overflow-hidden",children:[s.jsxs("div",{className:"w-full text-ellipsis overflow-hidden",children:[s.jsx(y,{to:`/dashboard/users/${e.messageUserId}`,className:"text-indigo-900 font-semibold hover:text-indigo-700",children:s.jsx("p",{className:"text-sm text-indigo-900 whitespace-normal",children:e==null?void 0:e.message})}),s.jsx("p",{className:"text-xs text-gray-500 whitespace-normal",children:B(e==null?void 0:e.createdAt)})]}),s.jsxs("div",{className:"flex items-center space-x-2 gap-1 mt-2 md:mt-0",children:[!(e!=null&&e.isRead)&&s.jsx(i,{onClick:()=>u(e._id),variant:"outline",size:"sm",className:"hover:bg-indigo-100",children:"تم القراءة"}),s.jsx(C,{className:`${e!=null&&e.isRead?"bg-gray-500":"bg-blue-500"} text-white`,children:e!=null&&e.isRead?"مقروءة":"جديدة"})]})]})},a)):s.jsx("p",{className:"text-gray-500",children:"لا توجد إشعارات حالياً."})}),s.jsx("div",{className:"flex justify-center mt-6",children:Array.from({length:Math.ceil(c.length/d)},(e,a)=>s.jsx(i,{onClick:()=>j(a+1),variant:r===a+1?"solid":"outline",className:`mx-1 ${r===a+1?"bg-indigo-500 text-white":"bg-white text-indigo-500"}`,children:a+1},a+1))})]})]})};export{O as default};
