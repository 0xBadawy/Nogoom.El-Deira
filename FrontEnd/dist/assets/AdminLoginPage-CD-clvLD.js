import{b as N,c as w,d as y,r as v,j as e,L as m,a as k}from"./index-BLZ4aqdM.js";import{u as L}from"./index.esm-DL-DIQfq.js";import{L as S}from"./Deira-logo2-q4QQy5sZ.js";import{h as F}from"./Errors-CyIGExsm.js";const P=()=>{var i,d,c;const o=N(),x=w(),{login:g}=y();(i=x.state)!=null&&i.path;const[r,u]=v.useState(null),t={title:"تسجيل الدخول ادارة الموقع",email:"البريد الالكتروني",password:"كلمة المرور",login:"تسجيل الدخول"},{register:l,handleSubmit:p,formState:{errors:n}}=L(),h=async b=>{const{email:f,password:j}=b;(async()=>{try{const a=await k.post("/auth/signin",{email:f,password:j}),{data:s}=a;console.log(s),console.log(s.data.role),g(s.data),localStorage.setItem("token",s.token),s.data.role==="admin"||s.data.role==="editor"||s.data.role==="viewer"||s.data.role==="manager"?o("/dashboard"):o("/profile")}catch(a){const s=F(a.response.data.message);u(s)}})()};return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",style:{direction:"rtl"},children:e.jsxs("div",{className:"w-full max-w-md bg-white p-8 rounded-lg shadow-lg",children:[e.jsx("img",{src:S,alt:"logo",className:"w-40 mx-auto mb-6"}),e.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:t.title}),r&&e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",role:"alert",children:[e.jsx("strong",{className:"font-bold",children:"خطأ!"}),e.jsxs("span",{className:"block sm:inline",children:[" ",r]})]}),e.jsxs("form",{onSubmit:p(h),children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"email",children:t.email}),e.jsx("input",{type:"text",id:"email",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-indigo-300",placeholder:"email@example.com",...l("email")}),e.jsx("p",{className:"text-red-500 text-xs mt-1",children:(d=n.email)==null?void 0:d.message})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password",children:t.password}),e.jsx("input",{type:"password",id:"password",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-indigo-300",placeholder:"********",...l("password")}),e.jsx("p",{className:"text-red-500 text-xs mt-1",children:(c=n.password)==null?void 0:c.message})]}),e.jsx("button",{type:"submit",className:"w-full bg-indigo-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-indigo-600 transition duration-300",children:t.login})]}),e.jsxs("div",{className:"mt-6 text-center space-y-4",children:[e.jsx("div",{children:e.jsx(m,{to:"/forget-password",className:"text-blue-500 hover:underline",children:"نسيت كلمة المرور؟"})}),e.jsx("div",{className:"text-center",children:e.jsx(m,{to:"/",className:"text-blue-500 hover:underline",children:" تصفح الموقع كزائر بدون تسجيل الدخول"})})]})]})})};export{P as default};
