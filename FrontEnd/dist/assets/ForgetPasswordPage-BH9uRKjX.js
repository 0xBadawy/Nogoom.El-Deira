import{d as p,r as a,b as f,j as e,L as j,a as N,e as v}from"./index-D3SbzoaF.js";import{u as w}from"./index.esm-BWFjDlvZ.js";import{L as y}from"./Deira-logo2-q4QQy5sZ.js";const P=()=>{var x,u;const{resetPassword:S}=p(),[s,l]=a.useState(!1),[o,n]=a.useState(null),[g,L]=a.useState(!1),b=f(),t={title:"استعادة كلمة المرور",email:"البريد الالكتروني",reset:"إعادة تعيين كلمة المرور",backToLogin:"الرجوع لتسجيل الدخول"},{register:i,handleSubmit:d,formState:{errors:c}}=w(),m=async h=>{l(!0),n(null);try{const r=await N.post("/auth/forgotpassword",h);console.log(r.data),v.success("تم إرسال رابط إعادة تعيين كلمة المرور بنجاح!"),b("/verify-code"),l(!1)}catch(r){console.error(r),n(r.response.data.message)}l(!1)};return e.jsx("div",{className:"grid grid-cols-1 mx-auto md:grid-cols-1",style:{direction:"rtl"},children:e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"w-full max-w-xl bg-white p-6 rounded-lg shadow-md",children:[e.jsx("img",{src:y,alt:"logo",className:"w-52 pb-20 mx-auto"}),e.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:t.title}),g?e.jsxs("div",{className:"bg-green-100 border border-green-400 text-green-700 p-4 rounded-md shadow-md mt-4",children:[e.jsx("h3",{className:"font-bold text-lg mb-2",children:"تم إرسال الرابط بنجاح!"}),e.jsx("p",{className:"mb-2",children:"تم إرسال رابط إعادة تعيين كلمة المرور إلى بريدك الإلكتروني."}),e.jsx("p",{className:"mb-2",children:"إذا لم تجد البريد، يُرجى التحقق من قسم البريد العشوائي (Spam)."}),e.jsxs("form",{onSubmit:d(m),children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"code",children:"رمز إعادة تعيين كلمة المرور"}),e.jsx("input",{type:"text",id:"code",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-indigo-300",placeholder:"رمز إعادة تعيين كلمة المرور",...i("code",{required:"رمز إعادة تعيين كلمة المرور مطلوب."})}),e.jsx("p",{className:"text-red-500 text-xs mt-1",children:(u=c.code)==null?void 0:u.message})]}),e.jsx("div",{className:"mb-4",children:e.jsx("button",{type:"submit",disabled:s,className:"w-full bg-indigo-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-indigo-600",children:s?"جاري التحقق...":"تحقق"})})]})]}):e.jsxs(e.Fragment,{children:[o&&e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[e.jsx("strong",{className:"font-bold",children:" خطأ! "}),e.jsx("span",{className:"block sm:inline",children:o})]}),e.jsxs("form",{onSubmit:d(m),children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"email",children:t.email}),e.jsx("input",{type:"email",id:"email",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-indigo-300",placeholder:"email@example.com",...i("email",{required:"البريد الإلكتروني مطلوب.",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"يرجى إدخال بريد إلكتروني صالح."}})}),e.jsx("p",{className:"text-red-500 text-xs mt-1",children:(x=c.email)==null?void 0:x.message})]}),e.jsx("button",{type:"submit",disabled:s,className:"w-full bg-indigo-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-indigo-600",children:s?"جاري الإرسال...":t.reset})]})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsx(j,{to:"/login",className:"text-blue-500 hover:underline",children:t.backToLogin})})]})})})};export{P as default};
