import{r as t,j as s,c as A}from"./index-CVes0GIN.js";import{A as p}from"./data-CyOksF0G.js";const S=({initialSelectedUsers:v=[],onSelectionChange:c})=>{var f;const[o,j]=t.useState([]),[d,y]=t.useState(v),[u,i]=t.useState([]),[n,N]=t.useState({area:"",govrn:""});t.useEffect(()=>{(async()=>{try{const a=(await A.get("/user/stars_users")).data.data;j(a),i(a)}catch(r){console.error("Failed to fetch users:",r)}})()},[]),t.useEffect(()=>{let{area:e,govrn:r}=n;if(!e&&!r){i(o);return}const a=o.filter(l=>{var g,b;const w=((g=l.address)==null?void 0:g.area)||"",m=((b=l.address)==null?void 0:b.govern)||[],_=Array.isArray(m)?m.join(", "):m;return(!e||w===e)&&(!r||_.includes(r))});i(a)},[n,o]),t.useEffect(()=>{c&&c(d)},[d,c]);const U=e=>{y(r=>r.includes(e)?r.filter(a=>a!==e):[...r,e])},h=e=>{const{name:r,value:a}=e.target;N(l=>({...l,[r]:a,...r==="area"?{govrn:""}:{}}))},x=((f=p.find(e=>e.name===n.area))==null?void 0:f.subGovernments)||[];return s.jsxs("div",{className:"w-full bg-white p-2 md:p-6 border rounded-2xl shadow-xl h-fit",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-700 mb-4",children:"اختر النجوم:"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 mb-1",children:"المنطقة:"}),s.jsxs("select",{name:"area",value:n.area,onChange:h,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"اختر المنطقة"}),p.map(e=>s.jsx("option",{value:e.name,children:e.name},e.name))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 mb-1",children:"المحافظات:"}),s.jsxs("select",{name:"govrn",value:n.govrn,onChange:h,className:"w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500",disabled:!x.length,children:[s.jsx("option",{value:"",children:"اختر المحافظات"}),x.map((e,r)=>s.jsx("option",{value:e,children:e},r))]})]})]}),s.jsx("div",{className:"h-48 overflow-y-scroll border border-gray-300 rounded-lg p-3 space-y-3 bg-gray-50",children:u.length>0?u.map(e=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:`user-${e._id}`,value:e._id,checked:d.includes(e._id),onChange:()=>U(e._id),className:"w-5 h-5 accent-blue-500 rounded-md"}),s.jsx("label",{htmlFor:`user-${e._id}`,className:"ml-3 text-gray-700",children:e.name})]},e._id)):s.jsx("p",{className:"text-gray-500",children:"لا توجد نتائج"})})]})};export{S as U};
