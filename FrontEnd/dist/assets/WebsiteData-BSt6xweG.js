import{f as v,r,j as e,a as x,e as n,g as N,w as k,i as S,s as D}from"./index-BYdbx3cR.js";import{u as I}from"./index.esm-NWTMOSSX.js";import{F as A}from"./FormField-2GUNSBIK.js";import{P as F}from"./PageLoader-CG8osdcH.js";import"./Deira-logo2-q4QQy5sZ.js";const B=()=>{const{register:d,handleSubmit:p,reset:o}=I(),{getHomeData:f}=v(),[h,c]=r.useState(!1),[m,g]=r.useState(!1),[l,b]=r.useState({image1:{file:null,preview:null,url:""},image2:{file:null,preview:null,url:""}});r.useEffect(()=>{(async()=>{try{c(!0);const i=(await x.get("/dashboard/defult")).data;b(s=>({image1:{...s.image1,url:i.image1},image2:{...s.image2,url:i.image2}})),o(i)}catch{n.error("فشل في تحميل البيانات")}finally{c(!1)}})()},[f,o]);const u=async(a,t)=>{if(!a)return null;const i=N(D,`images/${t}`);return await k(i,a),await S(i)},y=(a,t)=>{const i=a.target.files[0];i&&b(s=>({...s,[t]:{...s[t],file:i,preview:URL.createObjectURL(i)}}))},j=async a=>{g(!0);try{const t={...a};l.image1.file&&(t.image1=await u(l.image1.file,"image1")),l.image2.file&&(t.image2=await u(l.image2.file,"image2")),console.log(t),await x.post("/dashboard/update",t),n.success("تم تحديث البيانات بنجاح"),o()}catch{n.error("حدث خطأ أثناء تحديث البيانات")}finally{g(!1),window.location.reload()}},w={mainInfo:[{id:"mainTitle",label:"العنوان الرئيسي للموقع"},{id:"subTitle",label:"العنوان الفرعي للموقع"}],mainInfo2:[{id:"adTitle",label:"عنوان الإعلان للموقع"},{id:"adDescription",label:"وصف الإعلان للموقع",type:"textarea"}],statistics:[{id:"campaignCount",label:"عدد الحملات"},{id:"clientCount",label:"عدد العملاء"},{id:"satisfactionRate",label:"معدل الرضا"},{id:"viewCount",label:"عدد المشاهدات"}],starAds:[{id:"starAd1",label:"إعلان النجوم 1"},{id:"starAd2",label:"إعلان النجوم 2"},{id:"starAd3",label:"إعلان النجوم 3"},{id:"starAd4",label:"إعلان النجوم 4"}],contact:[{id:"phone",label:"رقم الهاتف"},{id:"email",label:"البريد الإلكتروني"},{id:"whatsapp",label:"واتساب"}],socialMedia:[{id:"facebook",label:"رابط فيسبوك"},{id:"instagram",label:"رابط إنستجرام"},{id:"twitter",label:"رابط تويتر"},{id:"snapchat",label:"رابط سناب شات"},{id:"linkedin",label:"رابط لينكد إن"},{id:"youtube",label:"رابط يوتيوب"},{id:"tiktok",label:"رابط تيك توك"}],stores:[{id:"googlePlay",label:"رابط جوجل بلاي"},{id:"appStore",label:"رابط آب ستور"},{id:"hideSection",label:"إخفاء القسم"}],profile:[{id:"hideBalanceSection",label:" قسم الرصيد فى الملف الشخصي"}]};return h?e.jsx(F,{}):e.jsx("div",{className:"min-h-screen p-4 sm:p-6 lg:p-8 bg-gray-50 dark:bg-gray-800",children:e.jsx("div",{className:"max-w-7xl mx-auto bg-white dark:bg-gray-700 rounded-xl shadow-lg",children:e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-900 dark:text-white",children:"بيانات الموقع"}),e.jsxs("form",{onSubmit:p(j),className:"space-y-8",children:[Object.entries(w).map(([a,t])=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-200 border-b pb-2",children:[a==="mainInfo"&&"القسم رقم 1",a==="mainInfo2"&&"القسم رقم 2",a==="starAds"&&" القسم رقم 4",a==="statistics"&&"القسم رقم 3",a==="contact"&&"معلومات الاتصال",a==="socialMedia"&&"وسائل التواصل الاجتماعي",a==="stores"&&"متاجر التطبيقات",a==="profile"&&"الملف الشخصي"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(i=>e.jsx(e.Fragment,{children:i.id==="hideSection"||i.id==="hideBalanceSection"?e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:i.id,...d(i.id),className:"text-indigo-600 rounded border-gray-300 dark:border-gray-500 focus:ring-indigo-500"}),e.jsx("label",{htmlFor:i.id,className:"text-sm text-gray-700 dark:text-gray-200 mr-2",children:i.label})]},i.id):e.jsx("div",{className:"space-y-2",children:e.jsx(A,{id:i.id,label:i.label,type:i.type,register:d,className:"w-full truncate"})},i.id)}))})]},a)),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-200 border-b pb-2",children:"سياسة الخصوصية"}),e.jsx("div",{children:e.jsx("textarea",{...d("privacy"),className:"w-full min-h-[300px] p-3 border rounded-lg resize-y dark:bg-gray-800 dark:text-white"})})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:["image1","image2"].map((a,t)=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-white",children:["تحميل الصورة ",t+1]}),e.jsxs("div",{className:"space-y-4",children:[l[a].url&&e.jsx("img",{src:l[a].url,alt:`الصورة الحالية ${t+1}`,className:"w-32 h-32 object-cover rounded-lg"}),l[a].preview&&e.jsx("img",{src:l[a].preview,alt:`معاينة الصورة ${t+1}`,className:"w-32 h-32 object-cover rounded-lg"}),e.jsx("input",{type:"file",accept:"image/*",onChange:i=>y(i,a),className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-violet-50 file:text-violet-700 hover:file:bg-violet-100"})]})]},a))}),e.jsx("button",{type:"submit",disabled:m,className:"w-full max-w-md mx-auto block py-3 px-4 rounded-lg text-white bg-indigo-600 hover:bg-indigo-700 focus:ring-4 focus:ring-indigo-200 disabled:opacity-50 transition duration-200",children:m?"جاري التحديث...":"حفظ التغييرات"})]})]})})})};export{B as default};
